
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio 编程语言文档 - process.r 库模块帮助文档'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio 编程语言文档 - process.r 库模块帮助文档</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio 编程语言文档首页"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio 文档</span></a>
<h1>process.r 库模块帮助文档</h1>

<p><details>  <summary>调用参数说明</summary>  <p>
如果参数 @1 不是表，则所有参数先置入数组，数组中的表对象转换为 JSON。
如果参数 @1 不是以 -- 开始的字符串，则添加 process.r.options 中指定的默认选项。</p>

<p>aardio  将自动合成命令行，按需在首尾添加双引号并处理必要的转义。
但启用驼峰参数名自动转连字符格式（加--前缀），并以 = 号分隔名值对，省略 true 值。</p>

<p>process.r 中所有创建 R 进程的函数传启动参数都遵守此规则。
可用 R 或 R.utils 包提供的 commandArgs 解析收到的参数。
</p></details></p>

<p><a id="process"></a></p>

<h2>process 成员列表</h2>

<p><a id="process.r"></a></p>

<h3>process.r()</h3>

<p>运行 RScript.exe，<br>
成功 process.popen 对象，失败返回 null,错误输出信息，  </p>

<p>如果参数 @1 不是表，则所有参数先置入数组，数组中的表对象转换为 JSON。<br>
如果参数 @1 不是以 -- 开始的字符串，则添加 process.r.options 中指定的默认选项。  </p>

<p>aardio 将自动合成命令行，按需在首尾添加双引号并处理必要的转义。<br>
但启用驼峰参数名自动转连字符格式（加--前缀），并以 = 号分隔名值对，省略 true 值。  </p>

<p>可用 process.r.workDir 指定默认工作目录</p>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html  \n\nļ޷ Teleport Ultra , Ϊ ʵļصġ  \n\nڷϴ?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject">返回对象:processPopenObject</a></p>

<p><a id="process.r"></a></p>

<h2>process.r 成员列表</h2>

<p>R 语言扩展库，<br>
运行 R 代码时，如果没有 R 语言环境将自动下载安装</p>

<p><a id="process.r.code"></a></p>

<h3>process.r.code</h3>

<pre><code class="aardio language-aardio">process.r.code = /***  
/*请输入要执行的 R 代码，支持 aardio 模板语法。  
执行进程并等待结束，使用 process.r.logger 回显输出。*/  
***/
</code></pre>

<p><a id="process.r.codepage"></a></p>

<h3>process.r.codepage</h3>

<p>指定 R 编译器进程默认代码页，设为空值使用系统默认代码页，<br>
Win10以及更新的操作系统默认值为 65001，<br>
R 4.2 开始在 Win10以及更新的操作系统使用 UTF-8 编码（代码页 65001）</p>

<p><a id="process.r.exec"></a></p>

<h3>process.r.exec</h3>

<p>执行 R 代码，并等待完成。<br>
成功返回进程输出，出错返回 null, 错误输出。<br>
返回 JSON 时不解析，改用 json 函数可解析返回 JSON</p>

<p><a id="process.r.exec"></a></p>

<h3>process.r.exec(code,...)</h3>

<p>参数 @code 可以是 R 代码或 R 代码文件路径。<br>
如果参数 @2 不是表，则所有参数先置入数组，数组中的表对象转换为 JSON。<br>
aardio 将自动合成命令行，按需在首尾添加双引号并处理必要的转义。<br>
但启用驼峰参数名自动转连字符格式（加--前缀），并以 = 号分隔名值对，省略 true 值。<br>
在 R 语言中请用 args &lt;- commandArgs(T) 取参数，<br>
用 R.utils 提供的 commandArgs 解析命名参数，用 jsonlite 包解析 JSON。</p>

<p><a id="process.r.existPath"></a></p>

<h3>process.r.existPath()</h3>

<p>查找 R 安装目录，并检测否存在参数@1指定的子目录，<br>
如果存在返回完整路径。<br>
不指定参数返回 R 安装目录根目录</p>

<p><a id="process.r.getScriptPath"></a></p>

<h3>process.r.getScriptPath()</h3>

<p>返回 Rscript.exe 路径</p>

<p><a id="process.r.json"></a></p>

<h3>process.r.json</h3>

<p>执行 R 代码，并等待完成。<br>
成功返回解析进程输出的 JSON，解析失败则直接返回进程输出。<br>
出错返回 null, 错误输出。</p>

<p><a id="process.r.json"></a></p>

<h3>process.r.json(code,...)</h3>

<p>参数@code 可以是 R 代码或 R 代码文件路径。<br>
如果参数 @1 不是表，则所有参数先置入数组，数组中的表对象转换为 JSON。<br>
aardio 将自动合成命令行，按需在首尾添加双引号并处理必要的转义。<br>
但启用驼峰参数名自动转连字符格式（加--前缀），并以 = 号分隔名值对，省略 true 值。<br>
在 R 语言中请用 args &lt;- commandArgs(T) 取参数，<br>
用 R.utils 提供的 commandArgs 解析命名参数，用 jsonlite 包解析 JSON。</p>

<p><a id="process.r.loadcode"></a></p>

<h3>process.r.loadcode()</h3>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html  \n\nļ޷ Teleport Ultra , Ϊ ʵļصġ  \n\nڷϴ?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject">返回对象:processPopenObject</a></p>

<p><a id="process.r.loadcode"></a></p>

<h3>process.r.loadcode(code,...)</h3>

<p>使用 aardio 模板语法加载 R 代码。<br>
此函数返回 process.popen 对象。<br>
参数 code 可以是 aardio 代码或 aardio 代码文件路径。<br>
如果参数 @1 不是表，则所有参数先置入数组，数组中的表对象转换为 JSON。<br>
如果参数 @1 不是以 -- 开始的字符串，则添加 process.r.options 中指定的默认选项。  </p>

<p>aardio 将自动合成命令行，按需在首尾添加双引号并处理必要的转义。<br>
但启用驼峰参数名自动转连字符格式（加--前缀），并以 = 号分隔名值对，省略 true 值。<br>
在 R 语言中请用 args &lt;- commandArgs(T) 取参数，<br>
用 R.utils 提供的 commandArgs 解析命名参数，用 jsonlite 包解析 JSON。</p>

<p><a id="process.r.logger"></a></p>

<h3>process.r.logger</h3>

<p>指定 process.r.require 的默认回显对象。<br>
回显对象必须有 log 或 write 成员函数。<br>
可指定 console 或 winform.edit 等控件对象。</p>

<p><a id="process.r.options"></a></p>

<h3>process.r.options</h3>

<p>应指定为 null 或包含运行 RScript.exe 默认选项参数的数组，<br>
默认值为 {&quot;--vanilla&quot;}</p>

<p><a id="process.r.repos"></a></p>

<h3>process.r.repos</h3>

<p>修改安装包的镜像服务器。<br>
默认为 &quot;https://mirrors-&gt;ustc-&gt;edu-&gt;cn/CRAN/&quot;</p>

<p><a id="process.r.require"></a></p>

<h3>process.r.require(&quot;字符串参数&quot;)</h3>

<p>如果指定的 R 包未安装，则安装该包，<br>
可指定一个或多个要安装的包名参数。<br>
如果参数指定的包都已安装则返回 true，失败返回 null,错误信息。</p>

<p><a id="process.r.require"></a></p>

<h3>process.r.require()</h3>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html  \n\nļ޷ Teleport Ultra , Ϊ ʵļصġ  \n\nڷϴ?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject">返回对象:processPopenObject</a></p>

<p><a id="process.r.setLibPaths"></a></p>

<h3>process.r.setLibPaths()</h3>

<p>参数可用一个数组指定默认的 R 包搜索目录，可使用环境变量。<br>
不建议指定需要管理权限才能读写的 R 安装目录，<br>
默认包目录为 { &quot;%localappdata%/aardio/std/r/site-library&quot; }</p>

<p><a id="process.r.start"></a></p>

<h3>process.r.start</h3>

<p>启动 RScript.exe 执行代码或代码文件，返回 process.popen 对象</p>

<p><a id="process.r.start"></a></p>

<h3>process.r.start()</h3>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html  \n\nļ޷ Teleport Ultra , Ϊ ʵļصġ  \n\nڷϴ?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/process/popen.html#processPopenObject">返回对象:processPopenObject</a></p>

<p><a id="process.r.start"></a></p>

<h3>process.r.start(code,...)</h3>

<p>参数 @1 指定R 代码或 R 代码文件路径。<br>
其他参数可选指定一个或多个启动参数。<br>
启动参数可以是字符串、数组、表对象，<br>
由 string.args.joinEx 合成为启动命令行参数。<br>
参数中出现的表不会转为 JSON ，而是由 string.args 合成为命令行。<br>
命令行参数在 R 代码中可用 commandArgs 函数获取</p>

<p><a id="process.r.startRpc"></a></p>

<h3>process.r.startRpc</h3>

<p>执行 R 代码，并启动 启动 JSON-RPCS 服务端，<br>
返回 process.rpc.jsonClient 对象</p>

<p><a id="process.r.startRpc"></a></p>

<h3>process.r.startRpc()</h3>

<p><a href="#processRpcJsonClientObject">返回对象:processRpcJsonClientObject</a></p>

<p><a id="process.r.startRpc"></a></p>

<h3>process.r.startRpc(code,...)</h3>

<p>=参数 @1 指定R 代码，并启动 启动 JSON-RPCS 服务端。<br>
其他参数可选指定一个或多个启动参数。<br>
启动参数可以是字符串、数组、表对象，<br>
由 string.args.joinEx 合成为启动命令行参数。<br>
参数中出现的表不会转为 JSON ，而是由 string.args 合成为命令行。<br>
命令行参数在 R 代码中可用 commandArgs 函数获取</p>

<p><a id="process.r.startRpcSet"></a></p>

<h3>process.r.startRpcSet</h3>

<p>设置 startRpc 创建的 R 语言JSON RPC 服务端 JSON 转换参数。</p>

<p><a id="process.r.startRpcSet"></a></p>

<h3>process.r.startRpcSet(autoUnbox,simplifyDataFrame,simplifyVector,simplifyMatrix)</h3>

<p>设置 startRpc 创建的 JSON RPC 服务端转换 JSON 的默认参数。<br>
@autoUnbox 是否自动解包单原子向量，默认为 true。<br>
@simplifyDataFrame 对象数组是否自动转 R 的数据帧，默认为 true。<br>
@simplifyVector 原子数组是否自动转 R 的原子向量，默认为 fasle。<br>
@simplifyMatrix 符合要求的对象数组是否自动转 R 的矩阵，默认为 false。<br>
@autoUnbox，@simplifyVector 建议保持默认，不然单字符串这些转回来会变成数组。<br>
如果要设置更多参数，可以将个别有特殊要求的对象传 JSON 文本给 R，<br>
然后 R 用 fromJSON 函数自己转，可参考 R 语言 jsonlite 文档指定参数。</p>

<p><a id="process.r.workDir"></a></p>

<h3>process.r.workDir</h3>

<p>工作目录<br>
默认为 &quot;/&quot; 目录，也就是 aardio 应用程序根目录<br>
应用程序根目录在开发时指工程目录或工程外的启动代码所在目录，<br>
发布后指 EXE 目录</p>

<p><a id="process.r.x86"></a></p>

<h3>process.r.x86</h3>

<p>如果设为 true，则始终运行 32 位 Rscript.exe</p>

<p><a id="global"></a></p>

<h2>全局对象 成员列表</h2>

<p><a id="setScriptPath()"></a></p>

<h3>setScriptPath()</h3>

<p>可使用参数 @1 自定义 Rscript.exe 的路径，<br>
如果未指定 Rscript.exe 路径，默认自动获取系统安装的 Rscript.exe 路径</p>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/process/r/_.md  \n\nļ޷ Teleport Ultra , Ϊ Ŀļ͹淶ڡ  \n\nڷϴ?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/process/r/_.md'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/process/r/_.md">Markdown 格式</a></p>

</body> 
</html>