
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£ - fsys.update.dlMgr åº“æ¨¡å—å¸®åŠ©æ–‡æ¡£'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£ - fsys.update.dlMgr åº“æ¨¡å—å¸®åŠ©æ–‡æ¡£</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>fsys.update.dlMgr åº“æ¨¡å—å¸®åŠ©æ–‡æ¡£</h1>

<p><a id="fsys.update"></a></p>

<h2>fsys.update æˆå‘˜åˆ—è¡¨</h2>

<p><a id="fsys.update.dlMgr"></a></p>

<h3>fsys.update.dlMgr</h3>

<p>æ›´æ–°/ä¿®å¤åº”ç”¨ç¨‹åºæ–‡ä»¶ä¸‹è½½ç®¡ç†å™¨</p>

<p><a id="fsys.update.dlMgr"></a></p>

<h3>fsys.update.dlMgr()</h3>

<p><a href="#fsysUpdateDlmgrObject">è¿”å›å¯¹è±¡:fsysUpdateDlmgrObject</a></p>

<p><a id="fsys.update.dlMgr"></a></p>

<h3>fsys.update.dlMgr(updateUrl,saveDir,appVersion,appDir)</h3>

<p>updateUrl:ç‰ˆæœ¬æ–‡ä»¶version.txtçš„ç½‘å€,ä¹Ÿå¯ä»¥æŒ‡å®šåŒ…å«å¤šä¸ªç½‘å€çš„æ•°ç»„,<br>
æ›´æ–°æ–‡ä»¶å­˜å‚¨ç›®å½•<br>
appVersion:åº”ç”¨ç¨‹åºç‰ˆæœ¬å·,ä¸æŒ‡å®šè‡ªåŠ¨è·å–EXEäº§å“ç‰ˆæœ¬<br>
appDir:åº”ç”¨ç¨‹åºç›®å½•,ä¸æŒ‡å®šåˆ™ä¸ºå½“å‰EXEç›®å½•</p>

<p><a id="fsysUpdateDlmgrObject"></a></p>

<h2>fsysUpdateDlmgrObject æˆå‘˜åˆ—è¡¨</h2>

<p><a id="fsysUpdateDlmgrObject.httpHeaders"></a></p>

<h3>fsysUpdateDlmgrObject.httpHeaders</h3>

<p>å¯é€‰ä½¿ç”¨æ­¤å±æ€§æŒ‡å®šHTTPè¯·æ±‚å¤´,<br>
httpå¤´å¯ä»¥æ˜¯web.joinHeadersæ”¯æŒçš„å­—ç¬¦ä¸²ã€é”®å€¼å¯¹ã€æ•°ç»„ç­‰æ ¼å¼</p>

<p><a id="fsysUpdateDlmgrObject.onChecksum"></a></p>

<h3>fsysUpdateDlmgrObject.onChecksum</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onChecksum = function(count,total){
    io.stdout.write(&quot;å·²æ ¡æ£€æ–‡ä»¶&quot;, count,&#39;\r&#39;)
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onChecksumBegin"></a></p>

<h3>fsysUpdateDlmgrObject.onChecksumBegin</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onChecksumBegin = function(total){
    io.print(&quot;å¼€å§‹æ£€éªŒ,æ–‡ä»¶æ€»æ•°ï¼š&quot;, total)
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onConfirmDownload"></a></p>

<h3>fsysUpdateDlmgrObject.onConfirmDownload</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onConfirmDownload = function(isUpdated,appVersion,latestVersion,description){ 
    return !isUpdated; /*æ£€æµ‹ç‰ˆæœ¬å®Œæˆè§¦å‘æ­¤å‡½æ•°,  
@isUpdatedå‚æ•°è¡¨ç¤ºæ˜¯å¦æ›´æ–°,  
@appVersionå‚æ•°ä¸ºå½“å‰ç‰ˆæœ¬,  
@latestVersionå‚æ•°ä¸ºæ›´æ–°çš„ç‰ˆæœ¬å·,  
@descriptionä¸ºæ›´æ–°è¯´æ˜  
è¿”å›çœŸç»§ç»­ä¸‹è½½æ›´æ–°æ–‡ä»¶  
ä¸æŒ‡å®šæ­¤äº‹ä»¶æ—¶é»˜è®¤è¿”å›@isUpdatedå‚æ•°*/
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onDownloadBegin"></a></p>

<h3>fsysUpdateDlmgrObject.onDownloadBegin</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onDownloadBegin = function(totalSize,fileTotal){
    io.print(&quot;å¼€å§‹ä¸‹è½½æ›´æ–°æ–‡ä»¶&quot;, ..fsys.formatSize(totalSize),fileTotal)
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onDownloadFile"></a></p>

<h3>fsysUpdateDlmgrObject.onDownloadFile</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onDownloadFile = function(path,contentLength,fileSize){
    io.print(&quot;æ­£åœ¨ä¸‹æ–‡ä»¶&quot;, path)   
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onDownloadReceive"></a></p>

<h3>fsysUpdateDlmgrObject.onDownloadReceive</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onDownloadReceive = function(sizePs,downTotalSize,fileCount){
    io.print(&quot;å·²ä¸‹è½½æ–‡ä»¶æ•°:&quot; + fileCount, ..fsys.formatSize(downTotalSize) )
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onEnd"></a></p>

<h3>fsysUpdateDlmgrObject.onEnd</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onEnd = function(updater,saveDir,appDir,mainPath,updateFilesCount){
    /*æ›´æ–°æ–‡ä»¶å·²å‡†å¤‡å°±ç»ª,  
ä»¥ä¸‹å‚æ•°ä¸­çš„è·¯å¾„å·²ç»è½¬æ¢ä¸ºç»å¯¹è·¯å¾„:  

updater æ‰§è¡Œæ–‡ä»¶æ›´æ–°çš„EXEè·¯å¾„  
saveDir ä¸‹è½½å‡çº§åŒ…çš„å­˜å‚¨ç›®å½•  
appDir éœ€è¦æ›´æ–°çš„åº”ç”¨ç¨‹åºç›®å½•  
mainPath æ­¤åº”ç”¨ç¨‹åºçš„å¯åŠ¨EXEè·¯å¾„  
updateFilesCount æ›´æ–°çš„æ–‡ä»¶æ•°*/
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onError"></a></p>

<h3>fsysUpdateDlmgrObject.onError</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onError = function(err,filename){
    io.print(&quot;æ›´æ–°é‡åˆ°é”™è¯¯:&quot;,err,filename/*å¯¼è‡´é”™è¯¯çš„æ–‡ä»¶è·¯å¾„æˆ–URL  
è¯¥å€¼å¯èƒ½ä¸ºç©º*/ )
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onUnCompress"></a></p>

<h3>fsysUpdateDlmgrObject.onUnCompress</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onUnCompress = function(fileCount,path){
    io.print(&quot;å·²è§£å‹&quot;, fileCount, path)
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.onUnCompressBegin"></a></p>

<h3>fsysUpdateDlmgrObject.onUnCompressBegin</h3>

<pre><code class="aardio language-aardio">fsysUpdateDlmgrObject.onUnCompressBegin = function(fileTotal){
    io.print(&quot;å¼€å§‹è§£å‹,æ–‡ä»¶æ€»æ•°ï¼š&quot;, fileTotal)
}
</code></pre>

<p><a id="fsysUpdateDlmgrObject.prepareUpdate"></a></p>

<h3>fsysUpdateDlmgrObject.prepareUpdate(å¯åŠ¨ä¸‹è½½å»¶æ—¶)</h3>

<p>å¯åŠ¨ã€Œæ£€æµ‹æ›´æ–°/ä¸‹è½½æ–‡ä»¶ã€çº¿ç¨‹ï¼Œ<br>
å»¶æ—¶å‚æ•°ä»¥æ¯«ç§’ä¸ºå•ä½,ä¸ºå¯é€‰å‚æ•°</p>

<p><a id="fsysUpdateDlmgrObject.startUpdate"></a></p>

<h3>fsysUpdateDlmgrObject.startUpdate</h3>

<p>å¦‚æœä¹‹å‰å·²ä¸‹è½½æ–°ç‰ˆæœ¬å®Œæˆï¼Œå¯åŠ¨è‡ªåŠ¨æ›´æ–°ï¼ŒæˆåŠŸè¿”å›trueï¼Œ<br>
å¦åˆ™è°ƒç”¨prepareUpdateå‡½æ•°å¯åŠ¨ã€Œæ£€æµ‹æ›´æ–°/ä¸‹è½½æ–‡ä»¶ã€çº¿ç¨‹</p>

<p><a id="fsysUpdateDlmgrObject.startUpdate"></a></p>

<h3>fsysUpdateDlmgrObject.startUpdate(å¯åŠ¨ä¸‹è½½å»¶æ—¶)</h3>

<p>å¯é€‰ä½¿ç”¨å‚æ•°@1æŒ‡å®šå¯åŠ¨æ—¶å»¶åä¸‹è½½æ›´æ–°æ–‡ä»¶ä»¥æå‡å¯åŠ¨é€Ÿåº¦,<br>
å»¶æ—¶å‚æ•°ä»¥æ¯«ç§’ä¸ºå•ä½</p>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/fsys/update/dlMgr.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª Ëü²»ÔÚÏîÄ¿ÎÄ¼şÀàĞÍ¹æ·¶ÄÚ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/fsys/update/dlMgr.md'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/fsys/update/dlMgr.md">Markdown æ ¼å¼</a></p>

</body> 
</html>