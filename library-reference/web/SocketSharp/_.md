[aardio æ–‡æ¡£](../../../index.htm "aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ")

# web.SocketSharp åº“æ¨¡å—å¸®åŠ©æ–‡æ¡?
å‚è€ƒæ–‡æ¡?
websocket-sharp.dll æºç 
[https://github.com/aardio/websocket-sharp](javascript:if(confirm('https://github.com/aardio/websocket-sharp  \n\nï¿½ï¿½ï¿½Ä¼ï¿½ï¿½Ş·ï¿½ï¿½ï¿½ Teleport Ultra ï¿½ï¿½ï¿½ï¿½, ï¿½ï¿½Îª ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â·ï¿½ï¿½ï¿½â²¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½Ö·ï¿½Äµï¿½Ö·ï¿½ï¿½  \n\nï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï´ï¿½ï¿½ï¿½ï¿½ï¿½?'))window.location='https://github.com/aardio/websocket-sharp')

æ³¨æ„ï¼?ä½¿ç”¨ console.open æ‰“å¼€æ§åˆ¶å°å¯ä»¥æŸ¥çœ?web.SocketSharp è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯ã€?
## web.SocketSharp æˆå‘˜åˆ—è¡¨

æ”¯æŒ ws,wss çš?WebSocket ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸?.NET ç»„ä»¶ã€?
ä»…é€‚ç”¨äºç•Œé¢çº¿ç¨‹ã€?
### web.SocketSharp.Net

.NET åå­—ç©ºé—´ WebSocketSharp.Net çš„åˆ«å?
### web.SocketSharp.WebSocket()

è°ƒç”¨ WebSocketSharp åˆ›å»º WebSocket å®¢æˆ·ç«¯å¯¹è±¡ã€?
å‚æ•° @1 å¯æŒ‡å®šç«¯å£å·ï¼Œä¹Ÿå¯æŒ‡å®?ws æˆ?wss åè®®æœåŠ¡å™¨åœ°å€ã€?
è¿”å› .NET å¯¹è±¡ï¼Œç”¨æ³•è¯·å‚è€?dotNet åº“ä»¥åŠèŒƒä¾?
[è¿”å›å¯¹è±¡:wssNetClientObject](#wssNetClientObject)

## web.SocketSharp.Server æˆå‘˜åˆ—è¡¨

### web.SocketSharp.Server.HttpServer()

è°ƒç”¨ WebSocketSharp åˆ›å»º WebSocket + HTTP æœåŠ¡ç«¯å¯¹è±¡ã€?
å‚æ•° @1 å¯æŒ‡å®?https æˆ?https åè®®æœåŠ¡å™¨åœ°å€ã€?
è¿”å› .NET å¯¹è±¡ï¼Œç”¨æ³•è¯·å‚è€?dotNet åº“ä»¥åŠèŒƒä¾‹ã€?
æ³¨æ„ç”?console.open æ‰“å¼€æ§åˆ¶å°å¯æŸ¥çœ‹ WebSocketSharp è¾“å‡ºçš„é”™è¯¯ä¿¡æ?
[è¿”å›å¯¹è±¡:wssNetHttpServerObject](#wssNetHttpServerObject)

### web.SocketSharp.Server.WebSocketServer()

è°ƒç”¨ WebSocketSharp åˆ›å»º WebSocket æœåŠ¡ç«¯å¯¹è±¡ã€?
å‚æ•° @1 å¯æŒ‡å®?ws æˆ?wss åè®®æœåŠ¡å™¨åœ°å€ã€?
è¿”å› .NET å¯¹è±¡ï¼Œç”¨æ³•è¯·å‚è€?dotNet åº“ä»¥åŠèŒƒä¾‹ã€?
æ³¨æ„ç”?console.open æ‰“å¼€æ§åˆ¶å°å¯æŸ¥çœ‹ WebSocketSharp è¾“å‡ºçš„é”™è¯¯ä¿¡æ?
[è¿”å›å¯¹è±¡:wssNetServerObject](#wssNetServerObject)

## web.SocketSharp.WebSocketState æˆå‘˜åˆ—è¡¨

### web.SocketSharp.WebSocketState.Closed

å·²å…³é—?
### web.SocketSharp.WebSocketState.Closing

æ­£åœ¨å…³é—­

### web.SocketSharp.WebSocketState.Connecting

æ­£åœ¨è¿æ¥

### web.SocketSharp.WebSocketState.Open

å·²è¿æ?
## wssNetClientObject æˆå‘˜åˆ—è¡¨

### wssNetClientObject.Close()

å…³é—­è¿æ¥ã€?
å‚æ•° @1 å¯é€‰ç”¨æ•°å€¼æŒ‡å®šå…³é—­ä»£ç ï¼Œå‚æ•° @2 å¯é€‰ç”¨å­—ç¬¦ä¸²æŒ‡å®šå…³é—­ç†ç”?
### wssNetClientObject.CloseAsync()

å…³é—­è¿æ¥ï¼Œå¼‚æ­¥éé˜»å¡æ‰§è¡Œã€?
å‚æ•° @1 å¯é€‰ç”¨æ•°å€¼æŒ‡å®šå…³é—­ä»£ç ï¼Œå‚æ•° @2 å¯é€‰ç”¨å­—ç¬¦ä¸²æŒ‡å®šå…³é—­ç†ç”?
### wssNetClientObject.Connect()

è¿æ¥ WebSocket æœåŠ¡å™?
### wssNetClientObject.ConnectAsync()

è¿æ¥ WebSocket æœåŠ¡å™¨ï¼Œå¼‚æ­¥éé˜»å¡æ‰§è¡?
### wssNetClientObject.EmitOnPing

Ping æ¶ˆæ¯æ˜¯å¦è§¦å‘ OnMessage

OnMessage æ˜¯å¦å¤„ç† Ping æ¶ˆæ¯ã€?
å›è°ƒå‚æ•° e çš?e.IsPing å±æ€§å¯ä»¥åˆ¤æ–­æ˜¯å?Ping æ¶ˆæ¯

### wssNetClientObject.EnableRedirection

æ˜¯å¦å…è®¸é‡å®šå?
### wssNetClientObject.Extensions

æ‰©å±•ï¼Œå­—ç¬¦ä¸²

### wssNetClientObject.Headers

```aardio aardio
wssNetClientObject.Headers["/*æŒ‡å®šè‡ªå®šä¹?HTTP è¯·æ±‚å¤´åå­—ï¼Œä¸åŒ…å«å†’å·ã€?å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸?æˆ?nullã€?å€¼ä¸º null æ—¶å¯æ¸…é™¤ä¹‹å‰è®¾ç½®çš„è‡ªå®šä¹‰è¯·æ±‚å¤?/"] = ""

```

### wssNetClientObject.IsAlive

æ˜¯å¦è¿æ¥çŠ¶æ€?
### wssNetClientObject.IsSecure

æ˜¯å¦å®‰å…¨è¿æ¥

### wssNetClientObject.OnClose

```aardio aardio
wssNetClientObject.OnClose = function(sender, e){
    /*æ¥å£å·²å…³é—­ã€?e.Code ä¸ºé”™è¯¯ç æ•°å€¼ï¼Œe.Reason ä¸ºè¡¨ç¤ºé”™è¯¯åŸå› çš„å­—ç¬¦ä¸?/
}

```

### wssNetClientObject.OnError

```aardio aardio
wssNetClientObject.OnError = function(sender, e){
    /*"å‡ºé”™äº? e.Message ä¸ºé”™è¯¯æ¶ˆæ¯ï¼Œå­—ç¬¦ä¸²å€¼ã€?å¦‚æœé”™è¯¯ä¸ºå¼‚å¸¸ï¼Œåˆ?e.Exception ä¸?System.Exception å¯¹è±¡*/

}

```

### wssNetClientObject.OnMessage

```aardio aardio
wssNetClientObject.OnMessage = function(sender, e){
    /*æ”¶åˆ°æ¶ˆæ¯", e.Data ä¸ºæ”¶åˆ°çš„å­—ç¬¦ä¸?/
}

```

### wssNetClientObject.OnOpen

```aardio aardio
wssNetClientObject.OnOpen = function(sender, e){
    /*è¿æ¥å·²æ‰“å¼€*/
}

```

### wssNetClientObject.Origin

Origin è¯·æ±‚å¤?
### wssNetClientObject.Protocol

åè®®

### wssNetClientObject.ReadyState

è¿æ¥çŠ¶æ€?web.SocketSharp.WebSocketState æšä¸¾

### wssNetClientObject.Send()

å‘é€å­—ç¬¦ä¸²æˆ?buffer å¯¹è±¡

### wssNetClientObject.SendAsync(data,callback)

```aardio aardio
wssNetClientObject.SendAsync(/*æŒ‡å®šè¦å¼‚æ­¥å‘é€çš„å­—ç¬¦ä¸²æˆ– bufferï¼?å‘é€å®Œæˆå›è°ƒå‚æ•?@2 æŒ‡å®šçš„å‡½æ•?/,function(completed){

})

```

### wssNetClientObject.SetCookie(cookie)

è®¾ç½® Cookie å‚æ•°ä¸?web.SocketSharp.Net.Cookie å¯¹è±¡

### wssNetClientObject.SetCredentials

è®¾ç½®èº«ä»½éªŒè¯ä¿¡æ¯ã€?
### wssNetClientObject.SetCredentials(username,password,preAuth)

è®¾ç½®èº«ä»½éªŒè¯ä¿¡æ¯ã€‚\ @nusername æŒ‡å®šç”¨æˆ·åï¼Œ @password æŒ‡å®šå¯†ç ã€?
å¦‚æœ @preAuth ä¸?true åˆ™ç¬¬ä¸€æ¬¡è¯·æ±‚å°±å‘é€éªŒè¯ä¿¡æ¯ã€?
å¦åˆ™åœ¨è¯·æ±‚å¤±è´¥åå†å‘é€?
### wssNetClientObject.SetProxy

è®¾ç½®ä»£ç†æœåŠ¡å™?
### wssNetClientObject.SetProxy(url,username,password)

è®¾ç½®ä»£ç†æœåŠ¡å™?
### wssNetClientObject.Url

è¿æ¥ URLï¼ŒSystem.Uri å¯¹è±¡

### wssNetClientObject.WaitTime

ç­‰å¾…æ—¶é—´ System.TimeSpan å¯¹è±¡

### wssNetClientObject.setAuthToken(token,tokenType)

è®¾ç½®è®¤è¯ä»¤ç‰Œï¼ˆtokenï¼‰ã€?
@token å¯æŒ‡å®šä»¤ç‰Œï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè¿”å›ä»¤ç‰Œçš„ç½‘å€ã€?
@tokenType ä¸ºå¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸?Bearer"ã€?
å¦‚æœæŒ‡å®šäº†ä»¤ç‰Œï¼Œåˆ™ä¼šæ·»åŠ è¯·æ±‚å¤?"Authorization:Bearer ä»¤ç‰Œ"ã€?
@tokenType ä¹Ÿå¯ä»¥æŒ‡å®šä¸ºç©ºå­—ç¬¦ä¸²ã€?
## wssNetClientObject.SslConfiguration æˆå‘˜åˆ—è¡¨

### wssNetClientObject.SslConfiguration.EnabledSslProtocols

è®¾ç½® SSL åè®®ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º 12288/\*tls13\*/ \| 3072/\*Tls12\*/\| 768/\*Tls11\*/ \| 192/\*Tls\*/

## wssNetHttpServerObject æˆå‘˜åˆ—è¡¨

### wssNetHttpServerObject.AddWebSocketService

```aardio aardio
wssNetHttpServerObject.AddWebSocketService("/echo",class {

    onMessage = function(e){
        /*
        this.socket ä¼šè‡ªåŠ¨ç»‘å®šä¸º WebSocketSharp.Server.WebSocketBehavior å®ä¾‹ã€?        ç”¨æ³•è¯·å‚è€?WebSocketSharp æ–‡æ¡£ã€?
        ä¸Šé¢çš„å‚æ•?@1 æŒ‡å®šäº†æœåŠ¡ç›®å½•ä¸º "/echo"ã€?        å‚æ•° @2 åˆ™éœ€è¦æŒ‡å®šä¸€ä¸?WebSocket ä¼šè¯ç±»ã€?        æ¯æ¬¡åˆ›å»ºæ–°çš„ WebSocket è¿æ¥æ—¶ä¼šè°ƒç”¨ç±»åˆ›å»?WebSocket ä¼šè¯å®ä¾‹ã€?
        å¿…é¡»å®šä¹‰ this.onMessage äº‹ä»¶ç”¨äºæ¥æ”¶æ¶ˆæ¯ã€?        å¯é€‰å®šä¹?this.onOpen, this.onClose, this.onError äº‹ä»¶ã€?        è¿™å‡ ä¸ªäº‹ä»¶ä¸ WebSocketSharp.Server.WebSocketBehavio çš„åŒåäº‹ä»¶ç”¨æ³•ç›¸åŒã€?        å”¯ä¸€ä¸åŒçš„æ˜¯é¦–å­—æ¯å°å†™ã€?
        å‘é€æ¶ˆæ¯å‡½æ•°ï¼š
        this.send() ç­‰ä»·äºè°ƒç”?this.socket.Send() åŒæ­¥å‘é€æ¶ˆæ¯ã€?        this.sendAsync() ç­‰ä»·äºè°ƒç”?this.socket.SendAsync() å¼‚æ­¥å‘é€æ¶ˆæ¯ã€?        å”¯ä¸€åŒºåˆ«æ˜¯é¦–å­—æ¯å°å†™ã€?        */

        /* åŒæ­¥å‘é€æ¶ˆæ¯ï¼Œe.data å°±æ˜¯å®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ¶ˆæ? */
            this.send(e.data)

            /* å¼‚æ­¥å‘é€æ¶ˆæ¯ï¼ŒæˆåŠŸå›è°ƒå‚æ•° @2 */
            this.sendAsync(e.data,function(completed){

            } )

    }
});

```

### wssNetHttpServerObject.AuthenticationSchemes

èº«ä»½éªŒè¯æ–¹æ³•ï¼?
Digest éªŒè¯è®¾ä¸º 1ï¼ŒBasic éªŒè¯è®¾ä¸º 8

### wssNetHttpServerObject.DocumentRootPath

ç½‘ç«™æ ¹ç›®å½•ï¼Œéœ€è¦ç”¨ io.fullpath è½¬æ¢ä¸ºç»å¯¹è·¯å¾?
### wssNetHttpServerObject.Start()

å¯åŠ¨æœåŠ¡å™?
### wssNetHttpServerObject.Stop()

åœæ­¢æœåŠ¡å™?
## wssNetHttpServerObject.SslConfiguration æˆå‘˜åˆ—è¡¨

SSL è¯ä¹¦é…ç½®ã€‚\\bwss æœåŠ¡ç«¯å¿…é¡»æŒ‡å®šè¯ä¹¦ï¼Œç½‘ä¸Šæ‰¾ä¸ªåœ¨çº¿å·¥å…·ç”Ÿæˆæµ‹è¯•è¯ä¹¦ä¹Ÿè¡Œ

SSL è¯ä¹¦é…ç½®ã€‚\\bwss æœåŠ¡ç«¯å¿…é¡»æŒ‡å®šè¯ä¹¦ï¼Œç½‘ä¸Šæ‰¾ä¸ªåœ¨çº¿å·¥å…·ç”Ÿæˆæµ‹è¯•è¯ä¹¦ä¹Ÿè¡Œ

### wssNetHttpServerObject.SslConfiguration.ServerCertificate

```aardio aardio
wssNetHttpServerObject.SslConfiguration.ServerCertificate = System.Security.Cryptography.X509Certificates.X509Certificate2(
    io.fullpath("\/*æŒ‡å®šè¯ä¹¦è·¯å¾„*/.pfx"), "å¯†ç "
);

```

```aardio aardio
wssNetHttpServerObject.SslConfiguration.ServerCertificate = System.Security.Cryptography.X509Certificates.X509Certificate2(
    io.fullpath("\/*æŒ‡å®šè¯ä¹¦è·¯å¾„*/.pfx"), "å¯†ç "
);

```

## wssNetServerObject æˆå‘˜åˆ—è¡¨

### wssNetServerObject.AddWebSocketService

```aardio aardio
wssNetServerObject.AddWebSocketService("/echo",class {

    onMessage = function(e){
        /*
        this.socket ä¼šè‡ªåŠ¨ç»‘å®šä¸º WebSocketSharp.Server.WebSocketBehavior å®ä¾‹ã€?        ç”¨æ³•è¯·å‚è€?WebSocketSharp æ–‡æ¡£ã€?
        ä¸Šé¢çš„å‚æ•?@1 æŒ‡å®šäº†æœåŠ¡ç›®å½•ä¸º "/echo"ã€?        å‚æ•° @2 åˆ™éœ€è¦æŒ‡å®šä¸€ä¸?WebSocket ä¼šè¯ç±»ã€?        æ¯æ¬¡åˆ›å»ºæ–°çš„ WebSocket è¿æ¥æ—¶ä¼šè°ƒç”¨ç±»åˆ›å»?WebSocket ä¼šè¯å®ä¾‹ã€?
        å¿…é¡»å®šä¹‰ this.onMessage äº‹ä»¶ç”¨äºæ¥æ”¶æ¶ˆæ¯ã€?        å¯é€‰å®šä¹?this.onOpen, this.onClose, this.onError äº‹ä»¶ã€?        è¿™å‡ ä¸ªäº‹ä»¶ä¸ WebSocketSharp.Server.WebSocketBehavio çš„åŒåäº‹ä»¶ç”¨æ³•ç›¸åŒã€?        å”¯ä¸€ä¸åŒçš„æ˜¯é¦–å­—æ¯å°å†™ã€?
        å‘é€æ¶ˆæ¯å‡½æ•°ï¼š
        this.send() ç­‰ä»·äºè°ƒç”?this.socket.Send() åŒæ­¥å‘é€æ¶ˆæ¯ã€?        this.sendAsync() ç­‰ä»·äºè°ƒç”?this.socket.SendAsync() å¼‚æ­¥å‘é€æ¶ˆæ¯ã€?        å”¯ä¸€åŒºåˆ«æ˜¯é¦–å­—æ¯å°å†™ã€?        */

        /* åŒæ­¥å‘é€æ¶ˆæ¯ï¼Œe.data å°±æ˜¯å®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ¶ˆæ? */
            this.send(e.data)

            /* å¼‚æ­¥å‘é€æ¶ˆæ¯ï¼ŒæˆåŠŸå›è°ƒå‚æ•° @2 */
            this.sendAsync(e.data,function(completed){

            } )

    }
});

```

### wssNetServerObject.Start()

å¯åŠ¨æœåŠ¡å™?
### wssNetServerObject.Stop()

åœæ­¢æœåŠ¡å™¨ã€?
å»ºè®®åœ¨çª—ä½?onDestroy äº‹ä»¶ä¸­è°ƒç”¨æ­¤å‡½æ•°ã€?
ä¸ç„¶ä¸‹æ¬¡å¯åŠ¨ï¼ŒçŸ­æ—¶é—´å†…ç«¯å£ä¼šæ˜¯å ç”¨çŠ¶æ€?
## wssNetServerObject.SslConfiguration æˆå‘˜åˆ—è¡¨

SSL è¯ä¹¦é…ç½®ã€‚\\bwss æœåŠ¡ç«¯å¿…é¡»æŒ‡å®šè¯ä¹¦ï¼Œç½‘ä¸Šæ‰¾ä¸ªåœ¨çº¿å·¥å…·ç”Ÿæˆæµ‹è¯•è¯ä¹¦ä¹Ÿè¡Œ

### wssNetServerObject.SslConfiguration.EnabledSslProtocols

è®¾ç½® SSL åè®®ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º 12288/\*tls13\*/ \| 3072/\*Tls12\*/\| 768/\*Tls11\*/ \| 192/\*Tls\*/

### wssNetServerObject.SslConfiguration.ServerCertificate

```aardio aardio
wssNetServerObject.SslConfiguration.ServerCertificate = System.Security.Cryptography.X509Certificates.X509Certificate2(
    io.fullpath("\/*æŒ‡å®šè¯ä¹¦è·¯å¾„*/.pfx"), "å¯†ç "
);

```

[Markdown æ ¼å¼](javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/web/SocketSharp/_.md  \n\nï¿½ï¿½ï¿½Ä¼ï¿½ï¿½Ş·ï¿½ï¿½ï¿½ Teleport Ultra ï¿½ï¿½ï¿½ï¿½, ï¿½ï¿½Îª ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Êµï¿½ï¿½Ä¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ØµÄ¡ï¿½  \n\nï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï´ï¿½ï¿½ï¿½ï¿½ï¿½?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/web/SocketSharp/_.md')

