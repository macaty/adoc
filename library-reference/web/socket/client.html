
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£ - web.socket.client åº“æ¨¡å—å¸®åŠ©æ–‡æ¡£'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£ - web.socket.client åº“æ¨¡å—å¸®åŠ©æ–‡æ¡£</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>web.socket.client åº“æ¨¡å—å¸®åŠ©æ–‡æ¡£</h1>

<p><a id="web.socket.client"></a></p>

<h2>web.socket.client æˆå‘˜åˆ—è¡¨</h2>

<p>æ”¯æŒå•çº¿ç¨‹å¼‚æ­¥çš„ WebSocket å®¢æˆ·ç«¯<br>
å¯ç›´æ¥åœ¨ç•Œé¢çº¿ç¨‹ä¸­ä½¿ç”¨ï¼Œä¸ä¼šé˜»å¡ç•Œé¢ï¼Œä¸éœ€è¦åˆ›å»ºå¤šçº¿ç¨‹<br>
æ”¯æŒæœåŠ¡ç«¯å¿ƒè·³(Ping/Pongå¸§)ï¼Œå®¢æˆ·ç«¯å•å‘å¿ƒè·³(Pongå¸§)æœºåˆ¶,<br>
å¯è°ƒç”¨ close å‡½æ•°æ–­çº¿ï¼Œå¹¶å¯è°ƒç”¨ connect å‡½æ•°å®ç°é‡æè¿æ¥æœåŠ¡å™¨</p>

<p><a id="web.socket.client.getSecAccept"></a></p>

<h3>web.socket.client.getSecAccept()</h3>

<p>è·å–WebSocketå®¢æˆ·ç«¯é…å¯¹å¯†é’¥ï¼Œ<br>
å‚æ•°æŒ‡å®šæœåŠ¡ç«¯HTTPå¤´ä¸­sec-websocket-acceptè¿”å›çš„å€¼</p>

<p><a id="web.socket.client.getSecKey"></a></p>

<h3>web.socket.client.getSecKey()</h3>

<p>è·å–WebSocketå®¢æˆ·ç«¯å¯†é’¥</p>

<p><a id="web.socket.client.sha1"></a></p>

<h3>web.socket.client.sha1()</h3>

<p>ä½¿ç”¨sha1ç®—æ³•å–å“ˆå¸Œå€¼ï¼Œå¹¶ä½¿ç”¨Base64ç¼–ç ä¸ºæ™®é€šæ–‡æœ¬</p>

<p><a id="web.socket"></a></p>

<h2>web.socket æˆå‘˜åˆ—è¡¨</h2>

<p>çº¯ aardio ä»£ç å®ç°çš„è½»é‡ WebSocket ç»„ä»¶ã€‚<br>
ä»…æ”¯æŒ ws åè®®ï¼Œæ”¹ç”¨ web.SocketSharp å¯æ”¯æŒ wss åè®®</p>

<p><a id="web.socket.client"></a></p>

<h3>web.socket.client()</h3>

<p><a href="#websocketclientObject">è¿”å›å¯¹è±¡:websocketclientObject</a></p>

<p><a id="websocketclientObject"></a></p>

<h2>websocketclientObject æˆå‘˜åˆ—è¡¨</h2>

<p><a id="websocketclientObject._translateMessage"></a></p>

<h3>websocketclientObject._translateMessage</h3>

<p>æ­¤å›è°ƒå‡½æ•°çš„å‚æ•°ä¸onMessageç›¸åŒ,<br>
å¦‚æœå®šä¹‰äº†è¿™ä¸ªå›è°ƒå‡½æ•°,<br>
é‚£ä¹ˆæ­¤å‡½æ•°å°†åœ¨è°ƒç”¨onMessageä»¥åè¢«è°ƒç”¨,<br>
è¿™ä¸ªå‡½æ•°æä¾›äº†ä¸€ä¸ªæœºä¼šç”¨äºè‡ªåŠ¨å¤„ç†æœåŠ¡å™¨æ¶ˆæ¯<br>
,ä¸ºå…¶ä»–éœ€è¦æ‰©å±•web.socket.clientåŠŸèƒ½çš„åº“æ‰€é¢„ç•™ï¼Œ<br>
ä¸€æ—¦å®šä¹‰å°†ä¸èƒ½ä¿®æ”¹</p>

<p><a id="websocketclientObject.close"></a></p>

<h3>websocketclientObject.close()</h3>

<p>å…³é—­è¿æ¥<br>
å¯é€‰å¢åŠ 2ä¸ªå‚æ•°æŒ‡å®šå‘é€ç»™æœåŠ¡å™¨çš„å…³é—­å¸§é™„åŠ æ•°æ®:<br>
å‚æ•°@1ä¸ºæ•°å€¼ç±»å‹çš„é”™è¯¯ä»£ç ,å‚æ•°@2ä¸ºå­—ç¬¦ä¸²ç±»å‹é”™è¯¯æè¿°</p>

<p><a id="websocketclientObject.connect"></a></p>

<h3>websocketclientObject.connect(&quot;ws://&quot;)</h3>

<p>é‡æ–°è¿æ¥åˆ°WebSocketæœåŠ¡ç«¯<br>
å‚æ•°æŒ‡å®šWebSocketæœåŠ¡ç«¯ç½‘å€ï¼Œä¾‹å¦‚ &quot;ws://localhost:7511&quot;<br>
å¦‚æœä¸æŒ‡å®šå‚æ•°,åˆ™è·å–ä¸Šæ¬¡è°ƒç”¨æ­¤å‡½æ•°æŒ‡å®šçš„ç½‘å€å‚æ•°,<br>
å¦‚æœä¹‹å‰ä¹Ÿæ²¡æœ‰æŒ‡å®šç½‘å€åˆ™æŠ›å‡ºå¼‚å¸¸</p>

<p><a id="websocketclientObject.headers"></a></p>

<h3>websocketclientObject.headers</h3>

<p>å…¶ä»–HTTPè¯·æ±‚å¤´<br>
å€¼å¯ä»¥æ˜¯æ–‡æœ¬æˆ–æ•°ç»„ã€æˆ–é”®å€¼å¯¹ç»„æˆçš„è¡¨<br>
è¯·æ±‚æ—¶ä¼šè°ƒç”¨ web.joinHeaders()å‡½æ•°æ‹¼æ¥å¹¶è½¬æ¢HTTPå¤´<br>
è¯¥å‡½æ•°æ”¯æŒçš„ç±»å‹å’Œæ ¼å¼è¿™ä¸ªå±æ€§éƒ½å¯ä»¥æ”¯æŒ</p>

<p><a id="websocketclientObject.heartbeatData"></a></p>

<h3>websocketclientObject.heartbeatData</h3>

<p>å•å‘å¿ƒè·³å‘é€çš„æ•°æ®,é»˜è®¤ä¸ºç©ºæ•°æ®<br>
è¿™ä¸ªå€¼ä¿®æ”¹ä»¥åï¼Œåªèƒ½åœ¨ä¸‹æ¬¡è°ƒç”¨connectå‡½æ•°æ‰ä¼šç”Ÿæ•ˆ</p>

<p><a id="websocketclientObject.heartbeatInterval"></a></p>

<h3>websocketclientObject.heartbeatInterval</h3>

<p>å®¢æˆ·ç«¯ä¸»åŠ¨å‘é€å¿ƒè·³é—´éš”,é»˜è®¤ä¸º30ç§’,<br>
è®¾ä¸º-1æ—¶ç¦ç”¨å®¢æˆ·ç«¯å¿ƒè·³,æ³¨æ„æŸäº›æœåŠ¡ç«¯æ”¶åˆ°å¿ƒè·³åŒ…ä¼šæŠ¥é”™,è¿™æ—¶å»ºè®®å…³æ‰å¿ƒè·³,<br>
æ­¤å±æ€§å€¼ä¿®æ”¹ä»¥åï¼Œåªèƒ½åœ¨ä¸‹æ¬¡è°ƒç”¨connectå‡½æ•°æ‰ä¼šç”Ÿæ•ˆ</p>

<p><a id="websocketclientObject.heartbeatType"></a></p>

<h3>websocketclientObject.heartbeatType</h3>

<p>å•å‘å¿ƒè·³å‘é€çš„çš„å¸§ç±»å‹,<br>
é»˜è®¤ä¸º0xA,ä¹Ÿå°±æ˜¯å•å‘å¿ƒè·³ Pong å¸§<br>
è¿™ä¸ªå€¼ä¿®æ”¹ä»¥åï¼Œåªèƒ½åœ¨ä¸‹æ¬¡è°ƒç”¨connectå‡½æ•°æ‰ä¼šç”Ÿæ•ˆ</p>

<p><a id="websocketclientObject.isClosed"></a></p>

<h3>websocketclientObject.isClosed()</h3>

<p>å¥—æ¥å­—æ˜¯å¦å·²å…³é—­</p>

<p><a id="websocketclientObject.isConnected"></a></p>

<h3>websocketclientObject.isConnected()</h3>

<p>å¥—æ¥å­—æ˜¯å¦å·²è¿æ¥å¹¶å‡†å¤‡å°±ç»ª(å·²ä¸æœåŠ¡å™¨æ¡æ‰‹æˆåŠŸ)</p>

<p><a id="websocketclientObject.onClose"></a></p>

<h3>websocketclientObject.onClose</h3>

<pre><code class="aardio language-aardio">websocketclientObject.onClose = function(e){
    /*è¿æ¥è¢«å…³é—­  
e.codeä¸ºé”™è¯¯ä»£ç e.reasonä¸ºé”™è¯¯åŸå› */  
}
</code></pre>

<p><a id="websocketclientObject.onError"></a></p>

<h3>websocketclientObject.onError</h3>

<pre><code class="aardio language-aardio">websocketclientObject.onError = function(err){
    /*å‘ç”Ÿé”™è¯¯,errä¸ºé”™è¯¯ä¿¡æ¯*/
}
</code></pre>

<p><a id="websocketclientObject.onFragment"></a></p>

<h3>websocketclientObject.onFragment</h3>

<pre><code class="aardio language-aardio">websocketclientObject.onFragment = function(msg){
   /*æ”¶åˆ°åˆ†ç‰‡æ•°æ®  
ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ä½¿ç”¨msg.typeæŒ‡æ˜ç±»å‹,å‚è€ƒWebSocketåè®®è§„èŒƒ  
åç»­æ•°æ®åŒ…msg.typeä¸º0,æœ€åä¸€ä¸ªæ•°æ®åŒ…msg.finä¸º1  

å¦‚æœä¸æŒ‡å®šè¿™ä¸ªå›è°ƒå‡½æ•°,åˆ™è‡ªåŠ¨å¹¶æ¥åˆ†ç‰‡æ•°æ®åè§¦å‘onMessageäº‹ä»¶*/ 
}
</code></pre>

<p><a id="websocketclientObject.onMessage"></a></p>

<h3>websocketclientObject.onMessage</h3>

<pre><code class="aardio language-aardio">websocketclientObject.onMessage = function(msg){
    /*æ”¶åˆ°æœåŠ¡ç«¯æ•°æ®  
msg.typeä¸º1æ—¶msg.dataä¸ºæ–‡æœ¬,  
å¦åˆ™msg.dataä¸ºå­—èŠ‚æ•°ç»„ï¼ˆbufferç±»å‹ï¼‰*/

}
</code></pre>

<p><a id="websocketclientObject.onOpen"></a></p>

<h3>websocketclientObject.onOpen</h3>

<pre><code class="aardio language-aardio">websocketclientObject.onOpen = function(){
    websocketclientObject.send(&quot;å·²è¿æ¥åˆ°WebSocketæœåŠ¡&quot;);
}
</code></pre>

<p><a id="websocketclientObject.originUrl"></a></p>

<h3>websocketclientObject.originUrl</h3>

<p>æµè§ˆå™¨å¯åŠ¨WebSocketå®¢æˆ·ç«¯çš„ç½‘å€<br>
ä¸€äº›WebSocketæœåŠ¡å™¨æ ¹æ®è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸æ˜¯å…è®¸è¿æ¥,<br>
æ‰€ä»¥æœ‰æ—¶å€™è®¾ç½®è¿™ä¸ªå¾ˆé‡è¦<br>
é»˜è®¤ä½¿ç”¨WebSocketç½‘å€ï¼Œå¹¶æŠŠ å‰é¢çš„ws://æ”¹ä¸ºhttp://</p>

<p><a id="websocketclientObject.protocol"></a></p>

<h3>websocketclientObject.protocol</h3>

<p>åº”ç”¨ç¨‹åºæ”¯æŒçš„åè®®åˆ—è¡¨,é»˜è®¤ä¸º&quot;chat&quot;</p>

<p><a id="websocketclientObject.readyState"></a></p>

<h3>websocketclientObject.readyState</h3>

<p>è¿æ¥çŠ¶æ€,<br>
0ä¸ºç­‰å¾…è¿æ¥,1ä¸ºå·²è¿æ¥å¹¶å‡†å¤‡å°±ç»ª,2ä¸ºæ­£åœ¨å…³é—­,3ä¸ºå·²å…³é—­<br>
åªæœ‰æˆåŠŸé€šè¿‡WebSocketåè®®æ¡æ‰‹ä»¥åreadyStateæ‰ä¼šè¢«ç½®ä¸º1<br>
è¿™ä¸socket.readyStateè¿æ¥æˆåŠŸå°±ä¼šç½®ä¸º1æ˜¯ä¸åŒçš„</p>

<p><a id="websocketclientObject.responseHeaders"></a></p>

<h3>websocketclientObject.responseHeaders</h3>

<p>æœåŠ¡ç«¯å“åº”çš„HTTPå¤´<br>
è¿™æ˜¯ä¸€ä¸ªè¡¨å¯¹è±¡ï¼Œé”®åéƒ½å·²è½¬ä¸ºå°å†™</p>

<p><a id="websocketclientObject.secKey"></a></p>

<h3>websocketclientObject.secKey</h3>

<p>è¿æ¥å¯†é’¥,ä¸å¯æ”¹åŠ¨</p>

<p><a id="websocketclientObject.send"></a></p>

<h3>websocketclientObject.send()</h3>

<p>å‘é€æ•°æ®,æ”¯æŒå­—ç¬¦ä¸²æˆ– bufferã€ç»“æ„ä½“<br>
å­—ç¬¦ä¸²ä½œä¸ºUTF8æ–‡æœ¬ç±»å‹å‘é€,å…¶ä»–ä»¥äºŒè¿›åˆ¶ç±»å‹å‘é€ï¼Œ<br>
æˆåŠŸè¿”å›true</p>

<p><a id="websocketclientObject.sendData"></a></p>

<h3>websocketclientObject.sendData(data,opcode,fin,mask,rsv1,rsv2,rsv3)</h3>

<p>å‘é€WebSocketæ•°æ®åŒ…<br>
å‚æ•°@1æ”¯æŒæ”¯æŒå­—ç¬¦ä¸²æˆ– bufferã€ç»“æ„ä½“<br>
é™¤å‚æ•°@1ä»¥å¤–,æ‰€ä»¥å‚æ•°å¯é€‰<br>
ä¸€èˆ¬åº”å½“è°ƒç”¨sendå‡½æ•°ï¼Œè€Œä¸æ˜¯è°ƒç”¨sendDataå‡½æ•°  </p>

<p>å¦‚æœä¸€å®šè¦ä½¿ç”¨è¿™ä¸ªå‡½æ•°,è¯·é˜…è¯»æ­¤å‡½æ•°æºç ,ä»¥åŠWebSocketåè®®ç›¸å…³è¯´æ˜</p>

<p><a id="websocketclientObject.socket"></a></p>

<h3>websocketclientObject.socket</h3>

<p>å¼‚æ­¥å¥—æ¥å­—å¯¹è±¡<br>
åœ¨å…³é—­è¿æ¥çŠ¶æ€ä¸‹æ­¤å±æ€§çš„å€¼ä¸ºnull<br>
åº”ç”±å¯¹è±¡è‡ªåŠ¨æ‰“å¼€æˆ–åˆ é™¤å¥—æ¥å­—å¯¹è±¡ï¼Œè°ƒç”¨è€…ä¸å¯æ”¹åŠ¨æ­¤å±æ€§çš„å€¼  </p>

<p><a href="../../wsock/tcp/asynClient.html#tcpaclientObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/wsock/tcp/asynClient.html#tcpaclientObject">è¿”å›å¯¹è±¡:tcpaclientObject</a></p>

<p><a id="websocketclientObject.url"></a></p>

<h3>websocketclientObject.url</h3>

<p>ä¸Šæ¬¡æˆåŠŸè¿æ¥çš„ç½‘å€<br>
ä¹Ÿå¯ä»¥ç”¨äºæŒ‡å®šä¸‹æ¬¡è¿æ¥çš„é»˜è®¤ç½‘å€</p>

<p><a id="websocketclientObject.userAgent"></a></p>

<h3>websocketclientObject.userAgent</h3>

<p>å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä»£ç†å¤´<br>
é»˜è®¤ä¸º&quot;Mozilla/5.0&quot;</p>

<p><a id="websocketclientObject.waitForConnected"></a></p>

<h3>websocketclientObject.waitForConnected(å…³è”çª—å£å¥æŸ„,è¶…æ—¶)</h3>

<p>ç­‰å¾…è¿æ¥åˆ°WebSocketæœåŠ¡ç«¯<br>
æ‰€æœ‰å‚æ•°å¯é€‰,è¶…æ—¶ä»¥æ¯«ç§’ä¸ºå•ä½,  </p>

<p>è¿æ¥æˆåŠŸè¿”å›true,å¤±è´¥è¿”å›falseæˆ–null</p>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/web/socket/client.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ·şÎñÆ÷±¨¸æ·ÃÎÊµÄÎÄ¼şÊÇÒş²ØµÄ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/web/socket/client.md'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/web/socket/client.md">Markdown æ ¼å¼</a></p>

</body> 
</html>