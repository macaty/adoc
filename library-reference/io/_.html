
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio 编程语言文档 - io 库模块帮助文档'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio 编程语言文档 - io 库模块帮助文档</title> 
<link rel="stylesheet" href="../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio 编程语言文档首页"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio 文档</span></a>
<h1>io 库模块帮助文档</h1>

<p><a id="io"></a></p>

<h2>io 成员列表</h2>

<p>文件、文件流相关函数库,<br>
包含控制台标准输入输出流操作,<br>
直接操作控制台请使用 console函数库，<br>
这是自动导入的内置库,<br>
<a href="../../library-guide/builtin/io/file.html" tppabs="https://www.aardio.com/zh-cn/doc/library-guide/builtin/io/file.html">使用手册相关文档</a></p>

<p><a id="io._exedir"></a></p>

<h3>io._exedir</h3>

<p>主程序所在目录,<br>
返回完整长路径，不会返回8.3短路径，不会返回相对路径  </p>

<p>目录路径以反斜杠结束</p>

<p><a id="io._exefile"></a></p>

<h3>io._exefile</h3>

<p>主程序文件名</p>

<p><a id="io._exepath"></a></p>

<h3>io._exepath</h3>

<p>主程序文件路径<br>
返回完整长路径，不会返回8.3短路径，不会返回相对路径</p>

<p><a id="io.appData"></a></p>

<h3>io.appData</h3>

<p>获取  %LocalAppData% 目录下的绝对路径。<br>
可选使用指定需要存入的数据</p>

<p><a id="io.appData"></a></p>

<h3>io.appData(path,data)</h3>

<p>将@path指定的相对路径转换为系统 %LocalAppData% 目录下的绝对路径,<br>
可选使用 @data 指定需要存入的数据,<br>
存入文件与目标文件长度不同或 PE 时间戳不同则允许替换旧文件,<br>
指定 @data 参数后如果无法创建文件返回null,<br>
最后返回转换所得的完整路径</p>

<p><a id="io.close"></a></p>

<h3>io.close()</h3>

<p>关闭控制台窗口。<br>
程序退出也会自动关闭控制台窗口。<br>
 调用 execute(&quot;pause&quot;) 或 console.pause() 可等待用户按键以避免立即退出</p>

<p><a id="io.createDir"></a></p>

<h3>io.createDir(&quot;/&quot;)</h3>

<p>创建目录<br>
如果有多个参数则首先用io.joinpath拼接<br>
如果父目录尚未创建将自动创建<br>
成功返回完整路径,失败返回空值</p>

<p><a id="io.curDir"></a></p>

<h3>io.curDir</h3>

<p>获取或修改当前目录</p>

<p><a id="io.curDir"></a></p>

<h3>io.curDir()</h3>

<p>无参数获取当前目录</p>

<p><a id="io.curDir"></a></p>

<h3>io.curDir(dir)</h3>

<p>将 @dir 参数指定的目录路径转换为完整路径并设为当前目录<br>
成功返回 true</p>

<p><a id="io.exist"></a></p>

<h3>io.exist</h3>

<p>判断文件路径是否存在，<br>
也可以用于判断文件是否可读写。  </p>

<p>包含不可见字符的错误路径可用「工具&gt;文本文件&gt;十六进制编辑器」<br>
或 string.hex 函数查看</p>

<p><a id="io.exist"></a></p>

<h3>io.exist(&quot;文件路径&quot;)</h3>

<p>判断文件路径是否存在<br>
存在则转换为绝对路径并返回该路径,不存在返回null<br>
参数@1不是有效字符串返回null</p>

<p><a id="io.exist"></a></p>

<h3>io.exist(&quot;文件路径&quot;,2)</h3>

<p>测试文件是否可写<br>
成功则转换为绝对路径并返回该路径,失败返回null<br>
目录或只读文件直接返回null<br>
参数@1不是有效字符串返回null</p>

<p><a id="io.exist"></a></p>

<h3>io.exist(&quot;文件路径&quot;,4)</h3>

<p>测试文件是否可读<br>
成功则转换为绝对路径并返回该路径,失败返回null<br>
目录返回null<br>
参数@1不是有效字符串返回null</p>

<p><a id="io.exist"></a></p>

<h3>io.exist(&quot;文件路径&quot;,6)</h3>

<p>判断文件是否可读写<br>
成功则转换为绝对路径并返回该路径,失败返回null<br>
目录返回null<br>
参数@1不是有效字符串返回null</p>

<p><a id="io.file"></a></p>

<h3>io.file</h3>

<p>打开文件,成功返回文件对象,<br>
失败返回 null,错误信息,错误代码。  </p>

<p>此函数创建的文件对象作为调用原生 API 的参数时<br>
可自动转换为系统文件句柄（存为指针类型）。</p>

<p><a id="io.file"></a></p>

<h3>io.file(&quot;/文件路径&quot;,&quot;读写模式&quot;,共享模式)</h3>

<p>参数@1指定路径,<br>
路径首字符可用斜杠表示应用程序根目录，用~加斜杠表示EXE根目录。<br>
如果<code>~\</code>或<code>~/</code>开头的EXE根目录路径不存在，自动转换为应用程序根目录下的路径重试。  </p>

<p>参数@2指定打开文件的读写模式，支持以下选项:<br>
w+ 可读写模式，创建新文件清空源文件<br>
w 只写模式，清空原文件<br>
r+ 可读写模式，文件必须存在,不清空文件内容<br>
r 只读模式,文件必须存在<br>
a+ 可读写追加模式，可打开原文件移动指针到文件尾，也可创建新文件<br>
a 只写追加模式，可打开原文件移动指针到文件尾，也可创建新文件<br>
b二进制模式，不转换回车换行<br>
t文本模式，输入使用单换行,输出使用回车换行,遇到 <code>&#39;\x1A&#39;</code>或 <code>&#39;\0&#39;</code>字符终止输入<br>
R 随机优化 S 连续优化<br>
D 创建临时文件,关闭对象后删除文件<br>
注意: r,w,a只能且必须选择其中一个作为读写模式的第一个字符  </p>

<p>参数@3 可选以 <em>SH</em>前缀常量指定共享模式</p>

<p><a id="io.file"></a></p>

<h3>io.file()</h3>

<p>第一个参数为 null 或 空字符串时创建并返回临时文件</p>

<p><a href="_.html#ioFileObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/io/_.html#ioFileObject">返回对象:ioFileObject</a></p>

<p><a id="io.file"></a></p>

<h3>io.file(系统文件句柄,读写模式)</h3>

<p>系统文件句柄转换为文件对象<br>
读写模式为字符串,同样使用&quot;r&quot;,&quot;w&quot;,&quot;b&quot;等标记<br>
必须与原来的文件句柄使用相同的模式</p>

<p><a id="io.fullpath"></a></p>

<h3>io.fullpath(&quot;字符串参数&quot;)</h3>

<p>将相对路径转换为绝对路径，转换规则如下:  </p>

<p>如果路径以双反斜杆 <code>\\</code> 开始，不作转换直接返回，路径前加 <code>\\?\</code> 可避免转换并支持畸形路径，<br>
如果路径以双正斜杠 <code>//</code> 开始，移除第一个斜杠后返回，不作其他转换，用于表示系统分区根目录,<br>
如果以单个 <code>\</code>  <code>/</code> 字符开始，作为 aardio 应用程序根目录下的相对路径转换并返回完整路径,<br>
如果路径以 <code>~</code> 开始,作为当前运行的EXE根目录下的相对路径转换并返回完整路径,<br>
其他路径按系统规则转换为完整路径,<br>
传入空字符串或空值返回 null  </p>

<p>注意相对路径 <code>.\</code> 易被改变，例如打开文件对话框可能改变相对路径。<br>
而 aardio 提供的应用程序根目录表示确定的位置。</p>

<p><a id="io.getSize"></a></p>

<h3>io.getSize()</h3>

<p>获取参数@1指定路径的文件字节长度,<br>
返回数值</p>

<p><a id="io.getSpecial"></a></p>

<h3>io.getSpecial(_CSIDL)</h3>

<p>获取特殊文件夹,<br>
参数@1使用 _CSIDL 开头的常量指定特殊文件夹的 CSIDL,<br>
不指定参数@1则默认值为 _CSIDL_DESKTOP,<br>
可选增加任意个拼接到目录后的子路径参数<br>
这个函数与fsys.getSpecial函数用法接近,<br>
但支持不定个数子路径参数, 不支持返回PIDL  </p>

<p>fsys.knownFolder 可用于获取更多已知的特殊文件夹</p>

<p><a id="io.getText"></a></p>

<h3>io.getText(可选指定缓冲区大小)</h3>

<p>读取控制台文本<br>
不包含尾部的回车换行,<br>
相比使用io.stdin.read函数,io.getText 可更好的支持 Unicode 字符</p>

<p><a id="io.joinpath"></a></p>

<h3>io.joinpath</h3>

<p>用于拼接多个文件路径。<br>
此函数可以避免文件路径首尾连接处缺少、或多余反斜杠的问题。</p>

<p><a id="io.joinpath"></a></p>

<h3>io.joinpath(dir,...)</h3>

<p>用于拼接多个文件路径参数。<br>
此函数首先会将斜杆自动转换为反斜杆。<br>
如果连接的非空路径之间没有至少一个反斜杆，则添加反斜杆。<br>
如果连接处双方都有反斜杆，则去掉其中一个。  </p>

<p>也可用参数 @1 指定目录参数，<br>
然后参数 @2 指定一个要按上述规则追加到尾部的反斜杠。</p>

<p><a id="io.libpath"></a></p>

<h3>io.libpath(&quot;字符串参数&quot;)</h3>

<p>将库路径转换为文件路径;<br>
如果库存在则返回 2 个值:库文件路径,库文件所在目录<br>
否则库路径返回null空值,按用户库合法格式返回目录路径,<br>
返回的库目录路径以反斜杠结束.</p>

<p><a id="io.lines"></a></p>

<h3>io.lines</h3>

<p>创建用于for in语句的迭代器,逐行读取文件,<br>
按行拆分普通字符串请使用 string.lines 函数</p>

<p><a id="io.lines"></a></p>

<h3>io.lines()</h3>

<p>无参数时逐行读取标准输入（控制台输入）</p>

<p><a id="io.lines"></a></p>

<h3>io.lines(文件对象）</h3>

<p>创建用于for in语句的迭代器,逐行读取文件,<br>
参数请指定一个用 io.file 打开的文件流对象.  </p>

<p>以文本模式打开文件,返回文本不含换行,<br>
二进制模式仅移除换行分隔符,遇<code>&#39;\0&#39;</code>会丢弃后续字符.  </p>

<p>不负责关闭参数传入的文件对象</p>

<p><a id="io.lines"></a></p>

<h3>io.lines(文件路径）</h3>

<p>创建用于 for in 语句的迭代器,逐行读取文件<br>
以文本模式打开文件，遇到<code>&#39;\x1A&#39;</code>、<code>&#39;\0&#39;</code>终止输入 。<br>
返回的文本不包含换行 。  </p>

<p>循环结束立即关闭此函数打开的文件对象。<br>
但是：如果使用 break,return 等语句中断循环，<br>
则打开的文件对象可能不会立即关闭（稍后内存回收后关闭）。<br>
改为传入文件对象作为参数，可自行控制何时关闭文件</p>

<p><a id="io.localpath"></a></p>

<h3>io.localpath(&quot;字符串参数&quot;)</h3>

<p>如果路径使用了 aardio 专用格式转换为系统支持的完整路径，<br>
否则返回空值。  </p>

<p>转换规则如下：  </p>

<p>如果路径以双反斜杆 <code>\\</code> 开始，不作转换直接返回 null 空值,<br>
如果路径以双正斜杠 <code>//</code> 开始，移除第一个斜杠后返回，不作其他转换，可用于表示系统分区根目录。<br>
如果以单个 <code>\</code>  <code>/</code> 字符开始，将参数作为 aardio 应用程序根目录下的相对路径转换并返回完整路径。<br>
如果路径以 <code>~</code> 开始，将参数作为当前启动 EXE 根目录下的相对路径转换并返回完整路径。<br>
其他格式路径不作转换返 null 空值。</p>

<p><a id="io.open"></a></p>

<h3>io.open()</h3>

<p>此函数用于打开控制台。<br>
除可选用参数 @2 自定义控制台标题（参数 @1 必须为 null 值），不可指定任何其他参数。<br>
改用基于 io.open 的 console.open 打开控制台可提供更多功能：  </p>

<ul>
<li>console 的很多库函数可自动按需调用 console.open<br></li>
<li>console.open 不会像 io.open 那样重置控制台并清除之前输出的内容<br></li>
<li>console.open 将更好地设置的控制台选项<br></li>
<li>console.open 会自动重定向 msvcrt.dll 的标准输入输出流<br></li>
<li>console.open 发布 afterConsoleOpen 消息，<br>
其他库可响应该消息并自动重定向标准输入输出到控制台。<br>
!<br>
<a href="_.html#ioFileObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/io/_.html#ioFileObject">返回对象:ioFileObject</a></li>
</ul>

<p><a id="io.popen"></a></p>

<h3>io.popen()</h3>

<p><a href="_.html#ioFileObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/io/_.html#ioFileObject">返回对象:ioFileObject</a></p>

<p><a id="io.popen"></a></p>

<h3>io.popen(命令行,读写模式)</h3>

<p>执行参数 @1 指定的命令，成功返回进程管道对象。<br>
失败返回 null,错误信息,错误代码。  </p>

<p>参数 @1 如果为完整路径且包含空格，应在首尾加上双引号。<br>
读写模式为 &quot;r&quot; ( 或省略 )返回绑定目标进程输入流的管道对象，<br>
读写模式为 &quot;w&quot; 返回绑定绑定目标进程输出流的管道对象。  </p>

<p>此函数不隐藏目标程序控制台，建议提前打开控制台。<br>
建议改用更强大的 process.popen（支持隐藏控制台）</p>

<p><a id="io.print"></a></p>

<h3>io.print</h3>

<p>在标准输出流（默认为控制台）输出信息。<br>
此函数没有自动打开控制台的功能。<br>
改用 print，console.log 函数可自动打开控制台窗口。</p>

<p><a id="io.print"></a></p>

<h3>io.print(...)</h3>

<p>在标准输出流（默认为控制台）输出信息。<br>
可指定任意个参数，参数自动调用 tostring 函数转为字符串。<br>
多参数输出时自动以制表符分开，最后会输出一个换行。</p>

<p><a id="io.remove"></a></p>

<h3>io.remove(&quot;字符串参数&quot;)</h3>

<p>删除参数 @1 指定路径的文件。<br>
在路径前加上 <code>\\?\</code> 可支持畸形路径。<br>
成功返回 true，失败返回 null，错误信息，错误代码 。  </p>

<p>此函数仅用于删除文件，<br>
删除目录请改用 fsys.delete、fsys.deleteEx 或 fsys.remove 函数。</p>

<p><a id="io.rename"></a></p>

<h3>io.rename</h3>

<p>重命名文件</p>

<p><a id="io.rename"></a></p>

<h3>io.rename(from,to)</h3>

<p>将参数 @1 指定路径的文件重命名为参数 @2 指定的文件路径。<br>
成功返回 true，失败返回 null</p>

<p><a id="io.specialData"></a></p>

<h3>io.specialData(path,data,csidl)</h3>

<p>将 @path 指定的相对路径转换为特殊文件夹下的绝对路径,<br>
可选使用 @data 指定需要存入的数据,<br>
存入文件与目标文件长度不同或 PE 时间戳不同则允许替换旧文件,<br>
指定 @data 参数后如果无法创建文件返回null,<br>
参数@csidl 使用 _CSIDL 开头的常量指定特殊文件夹的 CSIDL,<br>
不指定@csidl 则默认值为 _CSIDL_DESKTOP,<br>
最后返回转换所得的完整路径</p>

<p><a id="io.splitpath"></a></p>

<h3>io.splitpath()</h3>

<p>拆分文件路径为目录、文件名、后缀名、分区号等，<br>
返回 io.pathInfo 对象，<br>
返回对象可修改drive,path,name,ext等字段，<br>
并可作为 tostring 函数的参数重新合成为文件路径</p>

<p><a href="#ioSplitFileInfoObject">返回对象:ioSplitFileInfoObject</a></p>

<p><a id="io.stderr"></a></p>

<h3>io.stderr</h3>

<p>标准错误输出,<br>
在二进制模式下不做任何转换,<br>
但在文本模式下始终以 Unicode 编码输出文本,  </p>

<p><a href="_.html#ioFileObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/io/_.html#ioFileObject">返回对象:ioFileObject</a></p>

<p><a id="io.stdin"></a></p>

<h3>io.stdin</h3>

<p>标准输入,<br>
在二进制模式下不做任何转换,<br>
但在文本模式下始终以 Unicode 编码读取返回UTF-8编码文本,  </p>

<p>自控制台读取字符时,使用io.getText可以更好的支持Unicode字符  </p>

<p><a href="_.html#ioFileObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/io/_.html#ioFileObject">返回对象:ioFileObject</a></p>

<p><a id="io.stdout"></a></p>

<h3>io.stdout</h3>

<p>标准输出,<br>
在二进制模式下不做任何转换,<br>
但在文本模式下始终以 Unicode 编码输出文本,  </p>

<p><a href="_.html#ioFileObject" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/io/_.html#ioFileObject">返回对象:ioFileObject</a></p>

<p><a id="io.tmpname"></a></p>

<h3>io.tmpname</h3>

<p>生成系统临时文件目录下的临时文件路径</p>

<p><a id="io.tmpname"></a></p>

<h3>io.tmpname(prefix,ext)</h3>

<p>生成临时文件路径，<br>
可选用 @prefix 参数指定前缀名，<br>
可选用 @ext 参数指定后缀名，后缀名应包含点</p>

<p><a id="io.updateData"></a></p>

<h3>io.updateData</h3>

<p>更新指定文件的数据</p>

<p><a id="io.updateData"></a></p>

<h3>io.updateData(data,path,...)</h3>

<p>更新指定 @path 指定路径的文件为 @data 指定的数据。<br>
如果添加更多参数，则首先调用 io.joinpath 拼接到 @path 后面。<br>
存入文件与目标文件长度不同或 PE 时间戳不同则允许替换旧文件。<br>
替换失败返回 null，否则返回文件路径</p>

<p><a id="io.utf8"></a></p>

<h3>io.utf8</h3>

<p>设为true允许控制台启用UTF8模式<br>
所有线程设置必须相同,否则会导致重新打开控制台,<br>
WIN10 以上系统默认值为 true 。<br>
在 WIN10 以下的系统不建议设为 true,<br>
console 标准库始终使用 unicode 输出文本<br>
io.stdin,io.stdout,io.stderr 在默认的非二进制模式也使用 unicode 编码</p>

<p><a id="ioFileObject"></a></p>

<h2>ioFileObject 成员列表</h2>

<p><a id="ioFileObject.close"></a></p>

<h3>ioFileObject.close()</h3>

<p>关闭文件流</p>

<p><a id="ioFileObject.flush"></a></p>

<h3>ioFileObject.flush()</h3>

<p>输出缓冲区数据<br>
成功返回 true，失败返回 null,错误信息,错误代码</p>

<p><a id="ioFileObject.mode"></a></p>

<h3>ioFileObject.mode()</h3>

<p>不指定参数时返回表示文件读写模式的数值，<br>
对于标准输入输出流,aardio在二进制模式不转换编码,在文本模式负责自动转换编码  </p>

<p>普通文件对象 aardio 以 UTF8 编码或二进制模式读写,<br>
不会自动转换文本编码。</p>

<p><a id="ioFileObject.mode"></a></p>

<h3>ioFileObject.mode(mode)</h3>

<p>修改文件模式<br>
参数可设为二进制模式 _O_BINARY 或 文本模式 _O_TEXT,  </p>

<p>其他_O_WTEXT,_O_U16TEXT,_O_U8TEXT要求UTF-16读写，<br>
用于多字节或二进制操作会导致程序异常<br>
返回表示文件读写模式的数值，<br>
失败返回 null,错误信息,错误代码。<br>
指定错误的模式参数时会抛出异常</p>

<p><a id="ioFileObject.read"></a></p>

<h3>ioFileObject.read</h3>

<p>自文件读取数据。<br>
支持不定个数参数，每个参数指定一个读取标志并增加一个返回值。  </p>

<p>参数为&quot;%s&quot;读取并返回一行，参数数为 &quot;%d&quot; 读取一个数值。<br>
参数为数值则读取指定字节长度的数据并返回字符串。<br>
参数为结构体则读取数据并填充结构体的值。  </p>

<p>函数执行失败返回 null,错误信息,错误代码。</p>

<p><a id="ioFileObject.read"></a></p>

<h3>ioFileObject.read(&quot;%d&quot;)</h3>

<p>从当前位置,向后读取下一个数值，支持多参数。<br>
失败返回 null,错误信息,错误代码。</p>

<p><a id="ioFileObject.read"></a></p>

<h3>ioFileObject.read(&quot;%s&quot;)</h3>

<p>从当前位置,向后读取下一行，支持多参数。<br>
失败返回 null,错误信息,错误代码。</p>

<p><a id="ioFileObject.read"></a></p>

<h3>ioFileObject.read()</h3>

<p>从当前位置,向后读取下一行。<br>
失败返回 null,错误信息,错误代码。</p>

<p><a id="ioFileObject.read"></a></p>

<h3>ioFileObject.read(-1)</h3>

<p>向后读取到文件尾部。<br>
参数为负数表示读取到从文件尾部倒计数位置，支持多参数。<br>
成功返回读取数据，失败返回 null,错误信息,错误代码。<br>
读取普通文件全部数据使用 string.load 或 string.loadBuffer 更方便。</p>

<p><a id="ioFileObject.read"></a></p>

<h3>ioFileObject.read(0)</h3>

<p>检测是否未读取到文件尾。<br>
如果未到文件尾返回空字符串，已到文件尾则返回 null。<br>
注意在布尔表达式中空字符串等于 true，null 等于 false。</p>

<p><a id="ioFileObject.readAll"></a></p>

<h3>ioFileObject.readAll()</h3>

<p>移动指针到文件头，<br>
读取到文件尾返回全部数据。<br>
改用 -1 为参数调用 read 函数可自当前位置读取到文件尾。<br>
简单读取普通文件全部数据使用 string.load 或 string.loadBuffer 更方便</p>

<p><a id="ioFileObject.readBuffer"></a></p>

<h3>ioFileObject.readBuffer</h3>

<p>读取数据到 buffer，成功返回读取长度，失败返回null</p>

<p><a id="ioFileObject.readBuffer"></a></p>

<h3>ioFileObject.readBuffer(buffer指针,读取长度)</h3>

<p>直接读数据到内存，<br>
参数 @1 可以是 buffer,或内存指针。<br>
如果参数 @1 是指针则必须指定读取长度，否则可选是否指定长度参数。<br>
成功返回读取长度。</p>

<p><a id="ioFileObject.readTo"></a></p>

<h3>ioFileObject.readTo()</h3>

<p>读取到指定结束字符前面的所有字符,  </p>

<p>参数@1指定结束字符的字节码（数值）,<br>
单引号包含字符并加#号取字节码，例如 <code>&#39;\0&#39;#</code><br>
如果没有指定参数,则参数默认为<code>&#39;\0&#39;#</code>  </p>

<p>返回字符串不包含结束字符,但文件指针会移到该字符后面,<br>
如果未遇到指定字符,则读取到文件尾</p>

<p><a id="ioFileObject.readUtf16"></a></p>

<h3>ioFileObject.readUtf16(读取字符数)</h3>

<p>读取 UTF-16 编码数据,如果文件头有 BOM 会自动移除,<br>
参数按字符计数，不是按字节计数,<br>
如果已到文件尾读取长度可能小于参数指定的长度</p>

<p><a id="ioFileObject.readUtf16"></a></p>

<h3>ioFileObject.readUtf16(读取字符数,true)</h3>

<p>读取 UTF-16 编码数据,并直接返回 UTF-16 编码的字符串,<br>
参数按字符计数，不是按字节计数</p>

<p><a id="ioFileObject.readback"></a></p>

<h3>ioFileObject.readback()</h3>

<p>从当前位置,向前读取上一行<br>
仅支持UTF8或ANSI换行符,不支持UTF16换行符</p>

<p>正数参数表示从当前位置向前读取n个字节</p>

<p><a id="ioFileObject.readback"></a></p>

<h3>ioFileObject.readback(-1)</h3>

<p>向前读取到文件头部<br>
负数表示从文件头部倒计数位置</p>

<p><a id="ioFileObject.readback"></a></p>

<h3>ioFileObject.readback(0)</h3>

<p>检测是否读取到文件头</p>

<p><a id="ioFileObject.reopen"></a></p>

<h3>ioFileObject.reopen(&quot;CONOUT$&quot;,&quot;w&quot;)</h3>

<p>可使用&quot;CONOUT$&quot;重定向到控制台输出缓冲区,<br>
使用&quot;CONOUT$&quot;重定向到控制台输入缓冲区,<br>
重定向到控制台只能使用文本模式<br>
参数@2不可使用ccs标记指定编码<br>
成功返回 true，失败返回 null,错误信息,错误代码</p>

<p><a id="ioFileObject.reopen"></a></p>

<h3>ioFileObject.reopen(&quot;字符串参数&quot;,&quot;w+&quot;)</h3>

<p>重定向文件流<br>
成功返回 true，失败返回 null,错误信息,错误代码</p>

<p><a id="ioFileObject.seek"></a></p>

<h3>ioFileObject.seek(&quot;cur&quot;,)</h3>

<p>移动至相对当前位置的指定偏移量，偏移量应当是一个普通数值。<br>
1表示向后移动1字节,-1表示向前倒退1字节,<br>
成功返回当前位置（相对于文件开始计数）,<br>
失败返回null,错误信息,注意超越文件尾是允许的</p>

<p><a id="ioFileObject.seek"></a></p>

<h3>ioFileObject.seek(&quot;end&quot;)</h3>

<p>移动指针至结束处,并返回文件长度<br>
获取文件大小推荐使用 size() 函数</p>

<p><a id="ioFileObject.seek"></a></p>

<h3>ioFileObject.seek(&quot;end&quot;,)</h3>

<p>移动至相对结束处的指定偏移量，<br>
偏移量应当是一个普通数值。<br>
成功返回当前位置（相对于文件开始计数）,<br>
失败返回 null,错误信息,错误代码。注意超越文件尾是允许的</p>

<p><a id="ioFileObject.seek"></a></p>

<h3>ioFileObject.seek(&quot;set&quot;)</h3>

<p>移动指针到开始</p>

<p><a id="ioFileObject.seek"></a></p>

<h3>ioFileObject.seek(&quot;set&quot;,)</h3>

<p>移动至相对开始处的指定偏移量。<br>
注意0表示文件开始,1表示第一个字节后面,准备读取的是应该是第2字节,<br>
成功返回当前位置（相对于文件开始计数）,<br>
失败返回 null,错误信息,错误代码。注意超越文件尾是允许的。  </p>

<p>偏移量应当是一个普通数值。<br>
普通数值的整数上限为 8PB，没有可能会写这么大的文件。<br>
所以偏移量不支持、也不必要使用 math.size64 对象</p>

<p><a id="ioFileObject.seek"></a></p>

<h3>ioFileObject.seek()</h3>

<p>得到当前位置（相对于文件开始计数）</p>

<p><a id="ioFileObject.seteof"></a></p>

<h3>ioFileObject.seteof()</h3>

<p>将当前文件位置设为文件末尾,<br>
用于快速改变文件大小<br>
成功返回true</p>

<p><a id="ioFileObject.setvbuf"></a></p>

<h3>ioFileObject.setvbuf(&quot;full&quot;,)</h3>

<p>设为完全缓冲模式，<br>
读缓冲区直致为空再从流读入数据，写满缓冲区后向流写入数据<br>
参数@2使用字节数指定缓冲区大小</p>

<p><a id="ioFileObject.setvbuf"></a></p>

<h3>ioFileObject.setvbuf(&quot;line&quot;,)</h3>

<p>设为行缓冲模式，<br>
每次从流中读取或写入一行数据<br>
参数@2使用字节数指定缓冲区大小</p>

<p><a id="ioFileObject.setvbuf"></a></p>

<h3>ioFileObject.setvbuf(&quot;no&quot;)</h3>

<p>禁用缓冲</p>

<p><a id="ioFileObject.size"></a></p>

<h3>ioFileObject.size()</h3>

<p>返回文件总大小，返回值为普通数值。<br>
该函数不会改变文件指针当前位置，<br>
此函数不需要指定任何参数。<br>
size 函数可以表示的大小为 8PB，一般没有必要使用 size64 函数。</p>

<p><a id="ioFileObject.size64"></a></p>

<h3>ioFileObject.size64()</h3>

<p>返回文件总大小，返回值为 math.size64 对象。<br>
此函数不会改变文件指针当前位置。<br>
size 函数可以表示的大小为 8PB，一般没有必要使用 size64 函数。  </p>

<p><a href="../math/_.html#mathSize64Object" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/math/_.html#mathSize64Object">返回对象:mathSize64Object</a></p>

<p><a id="ioFileObject.type"></a></p>

<h3>ioFileObject.type()</h3>

<p>获取文件对象的类型<br>
例如控制台，管道，本地文件....等等<br>
返回值请参考_FILE_TYPE_前缀的常量</p>

<p><a id="ioFileObject.write"></a></p>

<h3>ioFileObject.write</h3>

<p>写数据</p>

<p><a id="ioFileObject.write"></a></p>

<h3>ioFileObject.write(, )</h3>

<p>写数据,支持一个或多个参数<br>
参数可以是字符串,数值,或结构体。<br>
成功返回 true，失败返回 null,错误信息,错误代码</p>

<p><a id="ioFileObject.writeBuffer"></a></p>

<h3>ioFileObject.writeBuffer</h3>

<p>写入buffer数据，成功返回写入长度,失败返回 null</p>

<p><a id="ioFileObject.writeBuffer"></a></p>

<h3>ioFileObject.writeBuffer(buffer指针,写入长度)</h3>

<p>直接写数据到内存。<br>
参数 @1 可以是 buffer、字符串、内存指针，<br>
如果是指针则必须指定写入长度，否则长度参数可选。<br>
成功返回写入长度。</p>

<p><a href="https://www.aardio.com/zh-cn/doc/library-reference/io/_.md">Markdown 格式</a></p>

</body> 
</html>