
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio 编程语言文档 - crypt.des 库模块帮助文档'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio 编程语言文档 - crypt.des 库模块帮助文档</title> 
<link rel="stylesheet" href="../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio 编程语言文档首页"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio 文档</span></a>
<h1>crypt.des 库模块帮助文档</h1>

<p><a id="crypt"></a></p>

<h2>crypt 成员列表</h2>

<p><a id="crypt.des"></a></p>

<h3>crypt.des</h3>

<p>DES，2DES，3DES 加密算法支持库<br>
加密模式CBC，填充模式PKCS5（兼容 PKCS7 ），如果与其他编程语言互通要保持一致<br>
各编程语言兼容的DES兼容写法参考](<a href="javascript:if(confirm('http://bbs.aardio.com/forum.php?mod=viewthread&tid=13148  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://bbs.aardio.com/forum.php?mod=viewthread&tid=13148'" tppabs="http://bbs.aardio.com/forum.php?mod=viewthread&tid=13148">http://bbs.aardio.com/forum.php?mod=viewthread&amp;tid=13148</a>)   </p>

<p>演示代码：  </p>

<pre><code class="aardio language-aardio">import crypt.des;   

var des = crypt.des();   
des.setPassword(&quot;abcd12&quot; )   

//加密  
var sstr = des.encrypt(&quot;测试字符串&quot;);  

//解密  
var str = des.decrypt(sstr);  
</code></pre>

<p><a id="crypt.des"></a></p>

<h3>crypt.des()</h3>

<p>返回 DES 加密容器。<br>
支持 DES，2DES，3DES 加密（根据密钥长度自动选择）。<br>
可选使用一个字符串参数指定密钥向量（ECB 模式忽略向量）。<br>
如果要与其他编程语言有相同加解密结果,建议不要设置该参数  </p>

<p><a href="#crypy3desObject">返回对象:crypy3desObject</a></p>

<p><a id="crypy3desObject"></a></p>

<h2>crypy3desObject 成员列表</h2>

<p><a id="crypy3desObject.allocBuffer"></a></p>

<h3>crypy3desObject.allocBuffer</h3>

<p>分配加解密需要用到的 buffer。</p>

<p><a id="crypy3desObject.allocBuffer"></a></p>

<h3>crypy3desObject.allocBuffer(大小,块大小)</h3>

<p>分配加解密需要用到的 buffer。<br>
如果不手动分配，程序将会自动按需分配 buffer。<br>
参数 @2 可选，可用对象的blockSize属性指定默认块大小。</p>

<p><a id="crypy3desObject.blockSize"></a></p>

<h3>crypy3desObject.blockSize</h3>

<p>加密填充的块大小，默认为 8</p>

<p><a id="crypy3desObject.buffer"></a></p>

<h3>crypy3desObject.buffer</h3>

<p>加解密时暂存输入输出数据的缓冲区。<br>
只能通过调用 allocBuffer 函数分配此缓冲区。<br>
或者由加解密函数自动分配此缓冲区。  </p>

<p>如果未分配缓冲区，或缓冲区大小不够。<br>
加解密时会重新调用 allocBuffer 函数分配到合适大小。   </p>

<p>一般不应直接访问此属性。</p>

<p><a id="crypy3desObject.decrypt"></a></p>

<h3>crypy3desObject.decrypt</h3>

<p>解密数据</p>

<p><a id="crypy3desObject.decrypt"></a></p>

<h3>crypy3desObject.decrypt(输入数据,是否已输入全部数据,哈希对象,选项)</h3>

<p>参数 @1 指定字符串或 buffer。<br>
除第一个参数以外，其他参数都是可选参数。<br>
分块解密时，参数 @2 必须为 flase 且参数 @1 的长度必须是块大小的倍数。<br>
成功返回解密文本,失败返回空,<br>
可使用..lasterr()函数获取错误信息</p>

<p><a id="crypy3desObject.decrypt"></a></p>

<h3>crypy3desObject.decrypt(输入缓冲区,输入数据大小,哈希对象,选项)</h3>

<p>参数 @1 指定 buffer 或字符串。<br>
如果参数 @2 指定的数值小于缓冲区据总长度，解密结束。<br>
可使用 -1 表示解密结束，且输入数据大小等于缓冲区大小。<br>
其他参数可忽略不用管。  </p>

<p>成功返回存放解密结果的缓冲区，返回值 2 为解密长度。<br>
需要分块解密的算法，例如 RSA 算法返回的解密结果为字符串。<br>
失败返回 null, 错误信息,错误代码。  </p>

<p>用法可参考 decryptFile 函数源码。</p>

<p><a id="crypy3desObject.decryptFile"></a></p>

<h3>crypy3desObject.decryptFile</h3>

<p>解密文件</p>

<p><a id="crypy3desObject.decryptFile"></a></p>

<h3>crypy3desObject.decryptFile(输入文件,输出文件,缓冲区大小,进度回调函数,哈希对象,选项)</h3>

<p>参数 @1 指定要解密的文件。参数 @2 指定要保存解密结果的文件。<br>
文件参数都可以指定文件路径、文件对象（兼容 io.file,fsys.file,fsys.stream）。<br>
可选用参数 @3 指定分块加密的字节长度，默认为 1MB。<br>
指定字节长度时会自动调整到对齐块大小，参数不需要考虑对齐。<br>
可选指定进度回调函数，回调参数 @1,@2 分别为输入文件总长度、已读取长度。<br>
其他调用参数（哈希对象，选项）一般不必指定。  </p>

<p>函数执行成功返回 true，失败返回 null,错误信息。</p>

<p><a id="crypy3desObject.encrypt"></a></p>

<h3>crypy3desObject.encrypt</h3>

<p>加密数据</p>

<p><a id="crypy3desObject.encrypt"></a></p>

<h3>crypy3desObject.encrypt(输入数据,是否已输入全部数据,哈希对象,选项)</h3>

<p>参数 @1 指定字符串或 buffer。<br>
除第一个参数以外，其他参数都是可选参数。<br>
分块加密时，参数 @2 必须为 flase 且参数 @1 的长度必须是块大小的倍数。<br>
成功返回加密文本,失败返回空,<br>
可使用..lasterr()函数获取错误信息</p>

<p><a id="crypy3desObject.encrypt"></a></p>

<h3>crypy3desObject.encrypt(输入缓冲区,输入数据大小,哈希对象,选项)</h3>

<p>参数 @1 指定 buffer 或字符串。<br>
如果参数 @2 指定的数值小于缓冲区据总长度，加密结束。<br>
可使用 -1 表示解密结束，且输入数据大小等于缓冲区大小。<br>
其他参数可忽略不用管。  </p>

<p>成功返回存放加密结果的缓冲区，返回值 2 为解密长度。<br>
需要分块解密的算法，例如 RSA 算法返回的解密结果为字符串。<br>
失败返回 null, 错误信息,错误代码。  </p>

<p>用法可参考 encryptFile 函数源码。</p>

<p><a id="crypy3desObject.encryptFile"></a></p>

<h3>crypy3desObject.encryptFile</h3>

<p>加密文件</p>

<p><a id="crypy3desObject.encryptFile"></a></p>

<h3>crypy3desObject.encryptFile(输入文件,输出文件,缓冲区大小,进度回调函数,哈希对象,选项)</h3>

<p>参数 @1 指定要加密的文件。参数 @2 指定要保存加密结果的文件。<br>
文件参数都可以指定文件路径、文件对象（兼容 io.file,fsys.file,fsys.stream）。<br>
可选用参数 @3 指定分块加密的字节长度，默认为 1MB。<br>
指定字节长度时会自动调整到对齐块大小，参数不需要考虑对齐。<br>
可选指定进度回调函数，回调参数 @1,@2 分别为输入文件总长度、已读取长度。<br>
其他调用参数（哈希对象，选项）一般不必指定。  </p>

<p>函数执行成功返回 true，失败返回 null,错误信息。</p>

<p><a id="crypy3desObject.hasKey"></a></p>

<h3>crypy3desObject.hasKey()</h3>

<p>检测是否已设置密钥</p>

<p><a id="crypy3desObject.setInitVector"></a></p>

<h3>crypy3desObject.setInitVector(字符串向量,选项)</h3>

<p>设置初始化向量，参数 @2 可选。<br>
成功返回true。  </p>

<p>ECB 模式忽略向量（IV），不需要指定。</p>

<p><a id="crypy3desObject.setKeyParam"></a></p>

<h3>crypy3desObject.setKeyParam(类型,数据值,选项)</h3>

<p>设置加密参数<br>
数据值可以是结构体,字符串，或 buffer 对象,<br>
如果数据值一个数值参数,则转换为表示32位整型数值地址的结构体指针<br>
成功返回true,失败请使用 ..lasterr()获取错误信息</p>

<p><a id="crypy3desObject.setKeyParamMode"></a></p>

<h3>crypy3desObject.setKeyParamMode(_CRYPT_MODE_ECB)</h3>

<p>设置为 ECB 加密模式。<br>
ECB 模式忽略向量（IV）。<br>
成功返回 true,失败请使用 ..lasterr()获取错误信息</p>

<p><a id="crypy3desObject.setKeyParamPadding"></a></p>

<h3>crypy3desObject.setKeyParamPadding(_PKCS5)</h3>

<p>设置加密填充方式<br>
成功返回true,失败请使用 ..lasterr()获取错误信息</p>

<p><a id="crypy3desObject.setPassword"></a></p>

<h3>crypy3desObject.setPassword</h3>

<p>设置密钥，根据密钥长度自动选择算法。<br>
如果遇到密钥长度不一致的情况，直接截断就可以。<br>
例如 DES 最长 8 字节密钥，如果遇到 32 字节密钥一般只要<br>
调用 string.left 取最前面 8 字节就可以。</p>

<p><a id="crypy3desObject.setPassword"></a></p>

<h3>crypy3desObject.setPassword(&quot;密钥&quot;,选项)</h3>

<p>密钥使用补 0 方式自动对齐。<br>
密钥长度小于等于 8 字节时使用 DES 加密<br>
密钥长度小于等于 16 字节时使用 2DES 加密<br>
密钥长度小于等于 24 字节时使用 3DES 加密,<br>
超过 24 字节使用使用MD5算法创建转换为24位密钥,<br>
参数 @2 不需要指定</p>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-reference/crypt/des.md  \n\nļ޷ Teleport Ultra , Ϊ ʵļصġ  \n\nڷϴ?'))window.location='https://www.aardio.com/zh-cn/doc/library-reference/crypt/des.md'" tppabs="https://www.aardio.com/zh-cn/doc/library-reference/crypt/des.md">Markdown 格式</a></p>

</body> 
</html>