
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - åˆ›å»ºåº”ç”¨'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - åˆ›å»ºåº”ç”¨</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: åˆ›å»ºåº”ç”¨</h1><pre><code class="aardio language-aardio">//åˆ›å»ºåº”ç”¨
//è¯·æ”¹ç”¨å¾®è½¯çš„ WebView2ï¼ˆä¹Ÿå°±æ˜¯ aardio æ ‡å‡†åº“é‡Œçš„ web.view ï¼‰ï¼‰

import electron.app;
var theApp = electron.app();

//è¿™æ˜¯å¯åŠ¨electronä¸»è¿›ç¨‹çš„main.js
theApp.jsMain =/**  
    const aardio = require(&#39;aardio&#39;)  //å¯åŠ¨RPCæœåŠ¡å…è®¸è°ƒaardio/electronäº’è°ƒå‡½æ•°,åˆ›å»ºBrowserWindowä¸»çª—å£
    const app = require(&#39;electron&#39;).app //ç®¡ç†electronè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ

    /*
     * aardio-electron ä¸»è¿›ç¨‹å·²å‡†å¤‡å°±ç»ª,
     * ä¸»çª—å£(BrowserWindow)å·²åˆ›å»ºè§¦å‘æ­¤äº‹ä»¶,
     * å¯å åŠ æ³¨å†Œå¤šä¸ªå›è°ƒ
     */
    aardio.ready( win=&gt; { 
        //if( !aardio.studioInvoke  ){
            win.removeMenu()
        //} 

       /*
        * ä¸å»ºè®®ç”¨ä¸‹é¢çš„ä»£ç æ‰“å¼€è°ƒè¯•å·¥å…·,
        * ä¼šæœ‰ä¸€äº›è¯¡å¼‚çš„é—®é¢˜ï¼Œä¾‹å¦‚ä¸èƒ½è¾“å…¥ä¸­æ–‡,
        * å»ºè®®æ”¹ä¸ºåœ¨aardioä¸­è°ƒç”¨ web.socket.chromeä»å¤–éƒ¨æ‰“å¼€è°ƒè¯•å·¥å…·.
        */
       // mainWindow.webContents.openDevTools ()  
    } )


    app.on(&#39;window-all-closed&#39;, () =&gt; {
        app.quit();

    }) 
**/


// å¯é€‰åœ¨è¿™é‡Œç›´æ¥æŒ‡å®šindex.htmlçš„ä»£ç ï¼Œå®é™…å¼€å‘è¯·å†™åˆ°å·¥ç¨‹æ–‡ä»¶é‡Œ
theApp.html = /** 
&lt;!DOCTYPE html&gt;
&lt;html&gt; 
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;aardioåµŒå…¥electronæ¼”ç¤º&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;

   &lt;h2 onmousedown=&quot;aardio.hitCaption();return false;&quot; 
        style=&quot;-webkit-user-select: none;cursor:default;&quot;&gt;æŒ‰è¿™é‡Œè°ƒç”¨aardio.hitCaption()æ‹–åŠ¨çª—å£!&lt;/h2&gt;

   &lt;button onclick=&quot;aardio.exit();&quot;&gt;ç‚¹è¿™é‡Œè°ƒç”¨aardioå…³é—­çª—å£&lt;/button&gt; &lt;br&gt;&lt;br&gt;

   &lt;button id=&quot;aardio&quot;&gt;ç‚¹è¿™é‡Œè·Ÿaardioäº’è°ƒä¸€ä¸‹å‡½æ•°&lt;/button&gt;&lt;br&gt;&lt;br&gt;

    &lt;?
    response.write(&quot;åœ¨electronä¸­æ‰§è¡Œaardioä»£ç &quot;)
    ?&gt;

    &lt;/body&gt;    

    &lt;script type=&quot;text/javascript&quot;&gt;   

    /*å¯¼å…¥aardioä¸­çš„app.external å¯¹è±¡*/
    aardio = require(&quot;aardio&quot;);

    /*å“åº”æŒ‰é’®ç‚¹å‡»äº‹ä»¶*/
    document.querySelector(&quot;#aardio&quot;).onclick = function(e){ 

        //è°ƒç”¨aardioä¸­çš„å‡½æ•°,helloè¦è°ƒç”¨çš„å‡½æ•°åå­—,åé¢å¯ä»¥è·Ÿä»»æ„ä¸ªè°ƒç”¨å‚æ•°
        aardio.ex.hello( &quot;ä½ ç‚¹å‡»äº†&quot; + e.target.innerHTML,1,2,3,&quot;æœ‰å‡ ä¸ªå‚æ•°å†™å‡ ä¸ª&quot; )
            .then( 
                function(message){
                    document.getElementById(&quot;aardio&quot;).innerText = &quot;aardioè¿”å›å€¼&quot; + message;
                } 
            )
    }

    /*å“åº”aardioæœåŠ¡ç«¯å‘èµ·çš„è°ƒæŸ¥ä»»åŠ¡*/
    aardio.on(&quot;getUrl&quot;,function(){
        return document.location.href;
    });

    &lt;/script&gt;

&lt;/html&gt;
**/

/*
åœ¨ä¸‹é¢çš„externalå¯¹è±¡ä¸­æŒ‡å®šå…è®¸electronæ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨JSç›´æ¥è°ƒç”¨çš„å‡½æ•°
ä¸‹é¢çš„external ä¼šç›´æ¥è½¬æ¢ä¸ºjsä¸­çš„aardioå¯¹è±¡ï¼Œåœ¨JSä¸­require(&#39;aardio&#39;)å°±å¯ä»¥ä½¿ç”¨
*/
theApp.external = {

    ex = {
        hello = function(...){
            win.msgbox( {...} ,&quot;electronè°ƒç”¨äº†aardioå‡½æ•° hello &quot; )
            return &quot;electron,æˆ‘æ˜¯aardio.ex.helloï¼Œä¸€èµ·ç©æ€ä¹ˆæ ·ï¼ï¼Ÿ&quot;
        } 
    }


    exit = function(){
        theApp.close();//å…³é—­ä¸»çª—å£ï¼Œé€€å‡ºç¨‹åº
    }

    //å¦‚æœå‡½æ•°åç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯$ï¼Œåˆ™ç¬¬ä¸€ä¸ªå›è°ƒå‚æ•°$ç”¨äºè¡¨ç¤ºå½“å‰å®¢æˆ·ç«¯,å¯ä½œä¸ºxcallçš„å‚æ•°ä½¿ç”¨
    $test = function($){
        theApp.xcall($,&quot;jså‡½æ•°&quot;)
    }
}

theApp.onUrlReady = function(hSocket,url){
    // åŠ è½½ä¸€ä¸ªé¡µé¢å®Œæˆéƒ½ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶
}

/*
å¯åŠ¨electron,ä¸‹é¢ä½¿ç”¨ä¸€ä¸ªaardioè¡¨å¯¹è±¡æŒ‡å®šçš„å¯åŠ¨å‚æ•°ï¼Œ
åœ¨electronçš„ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ä¸­éƒ½å¯ä»¥ç›´æ¥é€šè¿‡  aardio.startEnviron è®¿é—®ã€‚
*/
theApp.start(  

    //electronæ‰“å¼€çš„ç¬¬ä¸€ä¸ªé¡µé¢,å¿…é¡»æŒ‡å®šåº”ç”¨ç¨‹åºç›®å½•ä¸‹çš„aardioä»£ç æ–‡ä»¶
    indexUrl = &quot;/res/main.aardio&quot;;

    //æŒ‡å®šelectronåˆ›å»ºæµè§ˆå™¨çª—å£çš„å¯åŠ¨å‚æ•°, å¯ä»¥ä¸å†™,aardioä¼šè‡ªåŠ¨ç»™å‡ºæ­£ç¡®å‚æ•°
    browserWindow = {
        frame = false;
        webPreferences =  {
            nodeIntegration = true;
        }
    }

    /*
    å¯é€‰ç”¨argså­—æ®µæŒ‡å®šChromeå‘½ä»¤è¡Œå‚æ•°,
    å¿…é¡»åœ¨main.jsä¸­åˆ›å»ºçª—å£ä»¥å‰å°±å¯¼å…¥aardioæ¨¡å—æ‰ä¼šç”Ÿæ•ˆ
    */
    args ={

    }
);

//è°ƒæŸ¥ä»»åŠ¡ç»“æŸï¼ŒJSä»£ç æ±‡æŠ¥ç»“æœåˆ°è¿™é‡Œ
theApp.callback(&quot;getUrl&quot;,function(hSocket,result,err){
    win.msgbox(result,&quot;æ‰“å¼€äº†é¡µé¢&quot;)
})

theApp.onReady = function(){
    //å¯¹æ‰€æœ‰é¡µé¢å‘èµ·è°ƒæŸ¥ä»»åŠ¡,
    theApp.survey(&quot;getUrl&quot;);
} 

win.loopMessage();

</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/WebUI/Electron/electron.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª Ëü²»ÔÚÏîÄ¿ÎÄ¼şÀàĞÍ¹æ·¶ÄÚ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/WebUI/Electron/electron.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/WebUI/Electron/electron.md">Markdown æ ¼å¼</a>
</body> 
</html>