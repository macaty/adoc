
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - aardio è°ƒç”¨ C è¯­è¨€å‡½æ•°'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - aardio è°ƒç”¨ C è¯­è¨€å‡½æ•°</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: è°ƒç”¨ C è¯­è¨€å‡½æ•°</h1><pre><code class="aardio language-aardio">//aardio è°ƒç”¨ C è¯­è¨€å‡½æ•°
import console;
import tcc;  

var c = tcc(); 
c.enableIoPrintf(); //å¯ç”¨ io_print å‡½æ•°

c.code = /****
    #include &lt;stdio.h&gt;
    #include &lt;stdlib.h&gt; 

    //C99 __VA_ARGS__ é»˜è®¤è‡³å°‘åŒ¹é…1ä¸ªå‚æ•°,åŒ¹é…0ä¸ªå‚æ•°æ—¶,éœ€è¦ç”¨ ## å»æ‰å‰é¢çš„é€—å·
    #define dprintf(level, ...) io_printf(__VA_ARGS__) 

    typedef struct {
        int x;
        int y;
    }  Point;

    int helloW (char a,int b, unsigned long long c,Point * ppt,Point pt,double * pd)  
    {   
        io_printf(&quot;Cè¯­è¨€æ¥æ”¶åˆ°å‚æ•° a: %d b:%d c: %llu ppt-&gt;x: %d ppt-&gt;y:%d pt.x: %d pt.y:%d pd:%g\n&quot;,a,b,c,ppt-&gt;x,ppt-&gt;y,pt.x,pt.y,*pd);

        int n = 10;//å˜é‡å£°æ˜å¯ä»¥æ”¾å‡½æ•°ä¸­é—´
        long long ln = 100;//64ä½æ•´æ•°(ä¹Ÿå°±æ˜¯aardioä¸­çš„long),C99
        char s[n]; //å˜é•¿æ•°ç»„,C99 VLA  

        //C99æ ‡å‡†å¼•å…¥äº†Designated Initializersç‰¹æ€§ä½¿å¾—æ•°ç»„ã€ç»“æ„ä½“å’Œè”åˆä½“çš„åˆå§‹åŒ–æ›´åŠ çµæ´»å’Œæ–¹ä¾¿ã€‚
        struct { int x, y; } st[10] = { [0].x = 1, [0].y = 2 }; 
        int tab[10] = { 1, 2, [5] = 5, [9] = 9};

        //C99 compound literal 
        int *p = (int []){ 1, 2, 3 };

        //GCC æ•°ç»„åˆå§‹åŒ– 
        struct { int x, y; } st2 = { x: 1, y: 1};
        struct { int x, y; } st3 = { .x = 1, .y = 1};

        //GCC case ranges
        int v = 2;
        switch(v) {
            case 1 ... 9:
                io_printf(&quot;range 1 to 9\n&quot;);
                break;
            default:
                io_printf(&quot;unexpected\n&quot;);
                break;
        }

        //GCC __attribute__è¯­å¥
        int a2 __attribute__ ( ( aligned(8) ) );
        //å‚è€ƒ: https://bellard.org/tcc/tcc-doc.html

        return 0; 
    } 

****/ 

//å£°æ˜Cå‡½æ•°ï¼Œä¸å£°æ˜ API ç±»ä¼¼
//https://www.aardio.com/zh-cn/doc/library-guide/builtin/raw/api.html
var helloW = c.getCdecl(&quot;helloW&quot;,&quot;void(byte a,int b,LONG c,struct ppt,int pt_x,int pt_y,double &amp;pd)&quot;)
helloW(1,2,3,{int x = 4;int y = 5},6,7,8.1);

//ä¹Ÿå¯ä»¥ä¸å£°æ˜ï¼Œç›´æ¥è°ƒç”¨Cå‡½æ•°ï¼Œä¸ç›´æ¥è°ƒç”¨ API çš„è§„åˆ™ç›¸åŒ
var ret,ppt,pd = c.helloW(
    1,//å°äº32ä½çš„æ•´å‹æ•°å€¼å¯ä»¥ç›´æ¥ä¼ é€’ï¼Œè‡ªåŠ¨å…¼å®¹
    2,//32ä½æ•´å‹æ•°å€¼å¯ä»¥ç›´æ¥ä¼ é€’,è‡ªåŠ¨å…¼å®¹
    math.size64(3), //æ— ç¬¦å·64ä½æ•´æ•°ï¼Œå¯ä»¥ä¼  math.size64 å¯¹è±¡
    {int x = 4;int y = 5}, //aardio åœ¨APIå‚æ•°ä¸­ä¼ ç»“æ„ä½“ï¼Œæ€»æ˜¯ä¼ ç»“æ„ä½“æŒ‡é’ˆ,
    6,7, //ç›´æ¥åœ¨å‚æ•°ä¸­ç”¨ç»“æ„ä½“ä¼ å€¼æå…¶ç½•è§ï¼Œç±»ä¼¼è¿™ç§å­—æ®µä¸º32ä½é•¿çš„ç»“æ„ä½“å­—æ®µå¯ä»¥ç›´æ¥å±•å¼€ä¸ºå¤šä¸ªå‚æ•°
    {double v = 8.1} //å¯¹ç­‰Cä¸­çš„ double * è¿™ç§æŒ‡é’ˆï¼Œåœ¨ aardio ä¸­è½¬æ¢ä¸ºåŒç±»å‹çš„ç»“æ„ä½“æŒ‡é’ˆå³å¯
);
console.log( &quot;Cå‡½æ•°è¿”å›å€¼&quot;, ret )

/*
å¦‚æœCå‡½æ•°çš„å‚æ•°ä½¿ç”¨äº† double,float ç­‰æµ®ç‚¹æ•°å€¼å‚æ•°ï¼ˆä¼ å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æŒ‡é’ˆä¼ å€ï¼‰ï¼Œ
åˆ™å¿…é¡»å…ˆå£°æ˜å†è°ƒç”¨ï¼Œä¸å£°æ˜ç›´æ¥è°ƒç”¨æ— æ³•æ”¯æŒè¿™ç±»å‚æ•°ã€‚

ç›¸å…³æ–‡æ¡£ï¼š
https://www.aardio.com/zh-cn/doc/library-guide/builtin/raw/directCall.html
*/

console.pause();
</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/Languages/C/getCdecl.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª Ëü²»ÔÚÏîÄ¿ÎÄ¼şÀàĞÍ¹æ·¶ÄÚ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/Languages/C/getCdecl.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/Languages/C/getCdecl.md">Markdown æ ¼å¼</a>
</body> 
</html>