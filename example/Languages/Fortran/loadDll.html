
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - è°ƒç”¨ DLL'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - è°ƒç”¨ DLL</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: è°ƒç”¨ DLL</h1><pre><code class="aardio language-aardio">//è°ƒç”¨ DLL
import console

//åŠ è½½ DLL , DLL è·¯å¾„å‰åŠ  $ å®ç°å†…å­˜åŠ è½½ DLL(å‘å¸ƒåä¸éœ€è¦å¤–éƒ¨ DLL æ–‡ä»¶)
var dll = raw.loadDll($&quot;/fortran.dll&quot;,,&quot;cdecl&quot;);

/*
ä¸å£°æ˜ç›´æ¥è°ƒç”¨ï¼Œç»“æ„ä½“é»˜è®¤ä¼ å€ï¼Œè¿™ä¸ç”¨æ”¹ä»€ä¹ˆã€‚
ç”Ÿæˆçš„å‡½æ•°åç”¨ ã€Œaardio å·¥å…· / æ¢æµ‹å™¨ / DLL æŸ¥çœ‹å·¥å…·ã€ çœ‹ä¸€ä¸‹å°±æ˜ç™½äº†ï¼Œå‰é¢åŠ æ¨¡å—åï¼Œå‡½æ•°åå…¨è½¬å°å†™ã€‚
*/
var c = dll.__test_MOD_addbypoint({
    int x = 22;
    int y = 3;
})
console.log(c);

/*
Fortran ä¸­çš„ integer ç›¸å½“äº aardio ä¸­çš„ int ç±»å‹ï¼Œ32ä½ï¼Œå¯ç”¨ raw.int() å‡½æ•°åˆ›å»ºï¼Œæˆ–åœ¨ API ä¸­å£°æ˜ä¸º int ç±»å‹ã€‚
Fortran ä¸­çš„ integer*1 ç›¸å½“äº aardio ä¸­çš„ byte ç±»å‹ï¼Œ8ä½ï¼Œå¯ç”¨ raw.byte() å‡½æ•°åˆ›å»ºï¼Œæˆ–åœ¨ API ä¸­å£°æ˜ä¸º byte ç±»å‹ã€‚
Fortran ä¸­çš„ integer*2 ç›¸å½“äº aardio ä¸­çš„ word ç±»å‹ï¼Œ16ä½ï¼Œå¯ç”¨ raw.word() å‡½æ•°åˆ›å»ºï¼Œæˆ–åœ¨ API ä¸­å£°æ˜ä¸º word ç±»å‹ã€‚
Fortran ä¸­çš„ real(C_FLOAT), ç›¸å½“äº aardio ä¸­çš„ float ç±»å‹ï¼Œ32ä½ï¼Œå¯ç”¨ raw.float() å‡½æ•°åˆ›å»ºï¼Œæˆ–åœ¨ API ä¸­å£°æ˜ä¸º float ç±»å‹ã€‚
Fortran ä¸­çš„ real(c_double), ç›¸å½“äº aardio ä¸­çš„ double ç±»å‹ï¼Œ64ä½ï¼Œå¯ç”¨ raw.double() å‡½æ•°åˆ›å»ºï¼Œæˆ–åœ¨ API ä¸­å£°æ˜ä¸º double ç±»å‹ã€‚
https://gcc.gnu.org/onlinedocs/gfortran/ISO_005fC_005fBINDING.html
*/

//å¯ä»¥å…ˆå£°æ˜ä¸€ä¸‹ï¼Œå‚æ•°ç±»å‹åŠ ä¸Š&amp;å£°æ˜ä¸ºæŒ‰å¼•ç”¨ä¼ å€ï¼ˆæŒ‡é’ˆï¼‰
var add = dll.api(&quot;__test_MOD_add&quot;,&quot;int(int &amp;a,int &amp;b)&quot;)
var c = add(33,2); //Fortran çš„æ•°å€¼å‚æ•°é»˜è®¤éƒ½æ˜¯ä¼ å€ï¼ˆä¼ æŒ‡é’ˆï¼‰

//ä¸å£°æ˜ç›´æ¥è°ƒç”¨å¯ä»¥ç”¨ç»“æ„ä½“å–ä»£æŒ‡é’ˆ
var c = dll.__test_MOD_add({int a=33},{int b=2});

//ç”¨ raw.int åˆ›å»ºä¼ å€æ•°å€¼ä¹Ÿå¯ä»¥
var c = dll.__test_MOD_add(raw.int(33,true),raw.int(2,true));

//å‚æ•°å£°æ˜ä¸ºä¼ å€¼æ—¶è°ƒç”¨æ›´ç®€å•ï¼Œä¸å£°æ˜è°ƒç”¨æ—¶æ•°å€¼é»˜è®¤ä¸º int ç±»å‹
var c = dll.__test_MOD_addbyval(33,2,raw.double(123));
console.log(c);

//å­—ç¬¦ä¸²
var str = &quot;hello&quot;; //åªè¯»å­—ç¬¦ä¸²ï¼Œæ”¹ç”¨ raw.buffer åˆ›å»ºå¯è¯»å†™å­—èŠ‚æ•°ç»„
dll.__test_MOD_hello(str,#str); //æ³¨æ„åˆ°å­—ç¬¦ä¸²é•¿åº¦ä¼ è¿‡å»

//æ•°ç»„
var array = {1,2,3} 
var c,cArray = dll.__test_MOD_testarray({int items[]=array},#array); //æ³¨æ„åˆ°å­—ç¬¦ä¸²é•¿åº¦ä¼ è¿‡å»
console.log(c);
console.log(cArray.items[1]); //ä¸å£°æ˜ç›´æ¥è°ƒ APIï¼Œç»“æ„ä½“éƒ½ä¼šåœ¨è¿”å›å€¼è¿”å›

console.pause(true);

</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/Languages/Fortran/loadDll.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª Ëü²»ÔÚÏîÄ¿ÎÄ¼şÀàĞÍ¹æ·¶ÄÚ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/Languages/Fortran/loadDll.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/Languages/Fortran/loadDll.md">Markdown æ ¼å¼</a>
</body> 
</html>