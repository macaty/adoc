
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - ç»“æ„ä½“äºŒçº§æŒ‡é’ˆ'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - ç»“æ„ä½“äºŒçº§æŒ‡é’ˆ</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: ç»“æ„ä½“äºŒçº§æŒ‡é’ˆ</h1><pre><code class="aardio language-aardio">//ç»“æ„ä½“äºŒçº§æŒ‡é’ˆ
var code = /**** 
    #include &lt;stdlib.h&gt; 

    typedef struct {
        int x;
        int y;
    }  POINT;

    __declspec(dllexport) void copyPoints(int size,POINT ** pointsArray )
    { 
        for(int i=0;i&lt;size;i++){
            for(int j=0;j&lt;2;j++){
                pointsArray[i][j].x  = i*4+j*2+1;
                pointsArray[i][j].y  = i*4+j*2+2; 
            } 
        }
    }

    __declspec(dllexport) void copyNumbers(int size,double ** numbers )
    { 
        for(int i=0;i&lt;size;i++){
            for(int j=0;j&lt;2;j++){
                numbers[i][j] = i*2+j+0.5;
                numbers[i][j] = i*2+j+0.5; 
            } 
        }
    }

    //ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€çœ‹ä¸ºä»€ä¹ˆä¸ç”¨ raw.argsPointer ä¼šæ›´ç®€å•
    typedef struct {
        double items[2];
    }  NUMBERS;

    void copyNumberArray(int size,NUMBERS * numbers )
    { 
        for(int i=0;i&lt;size;i++){
            for(int j=0;j&lt;2;j++){
                numbers[i].items[j] = i*2+j+0.5;
                numbers[i].items[j] = i*2+j+0.5; 
            } 
        }
    }
****/

import tcc;  
var c = tcc();
c.compile(code); 

import console;
import raw.argsPointer;

class POINT_ARRAY{
    struct items[2] = { ::POINT() }
}

//ç¬¬ä¸€ç§ç”¨æ³•ï¼Œç›´æ¥è·å–å‚æ•°åˆ—è¡¨æŒ‡é’ˆ
var points = raw.argsPointer({ POINT_ARRAY(), POINT_ARRAY(), POINT_ARRAY() })
c.copyPoints(/* int */#points,/* POINT** */points ) //è°ƒç”¨ C å‡½æ•°;

//freePtr é‡Šæ”¾å†…å­˜æŒ‡é’ˆ,å¹¶ä¼šåˆ·æ–° API è¿”å›çš„æ•°ç»„å€¼ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ points.updateArray() åˆ·æ–°
console.dumpJson( points.freePtr() );  

//ç¬¬äºŒç§ç”¨æ³•ï¼Œé€šè¿‡å›è°ƒè·å–å‚æ•°åˆ—è¡¨æŒ‡é’ˆ
import raw.argsPointer; 
var numbers = raw.argsPointer({ {double items[2]}, {double items[2]}  },
    function(argsPtr,args){
        //argsPtr æ˜¯ double ç±»å‹äºŒç»´æ•°ç»„å‚æ•°çš„æŒ‡é’ˆ,args æ˜¯ç»‘å®šè¯¥æŒ‡é’ˆçš„æ•°ç»„
        c.copyNumbers(/* int */#args,/* double** */argsPtr ) ;
    } 
)

//è¾“å‡ºå¤–éƒ¨ API æ›´æ–°çš„æ•°ç»„å€¼
console.dumpJson( numbers );

//ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€çœ‹ä¸ºä»€ä¹ˆä¸ç”¨ raw.argsPointer ä¼šæ›´ç®€å•
class NUMBERS{
    double items[2]
}

var numbers = { struct items[2] ={ NUMBERS() }  }
c.copyNumberArray(2,numbers) ;

console.dumpJson( numbers.items );
console.log(&quot;ä¸ç”¨ raw.argsPointer ä»£ç å°‘äº†åå€å¯è¯»æ€§ä¹Ÿæ›´å¥½ï¼Œå®ç°çš„åŠŸèƒ½å®Œå…¨ä¸€æ ·ã€‚&quot;);
console.log(&quot;aardio ä¸æ˜¯ C/C++ï¼Œä¸è¦æœºæ¢°åœ°å¥—ç”¨ C/C++ çš„ç”¨æ³•ã€‚&quot;);
console.pause();


/**details(å®ç°åŸç†)
aardio ä¸­çš„å¯¹è±¡æ¯”é™æ€è¯­è¨€ä½¿ç”¨çš„åŸå§‹æ•°æ®è¦å¤æ‚å¾—å¤šï¼Œ
ä¾‹å¦‚ aardio ç»“æ„ä½“ä¸é™æ€è¯­è¨€çš„åŸå§‹ç»“æ„ä½“åœ¨å†…å­˜ä¸­çš„ç»“æ„å®é™…æ˜¯ä¸ä¸€æ ·çš„ã€‚

aardio å¯¹è±¡ä¹‹æ‰€ä»¥èƒ½ä½œä¸ºå‚æ•°ç”¨äºè°ƒç”¨é™æ€è¯­è¨€å®ç°çš„ API å‡½æ•°ï¼Œ
æ˜¯å› ä¸º aardio åœ¨å…¶ä¸­ä½œäº†éšå¼çš„è½¬æ¢ï¼Œæ‰“ç ´äº†åŠ¨/é™æ€è¯­è¨€ä¹‹é—´åŸæœ¬ä¸å¯é€¾è¶Šçš„é¸¿æ²Ÿã€‚
è¿™å¾ˆæ–¹ä¾¿ï¼Œä½†è¿™ç§æ— æ„Ÿçš„è‡ªåŠ¨è½¬æ¢ä¹Ÿä¼šè®©æˆ‘ä»¬äº§ç”Ÿé”™è§‰,è®©æˆ‘ä»¬å¿˜è®°äº† aardio å¹¶ä¸æ˜¯ C/C++ï¼Œ
ä¹Ÿå¿˜è®°äº†ä¸å¯é€¾è¶Šçš„é¸¿æ²Ÿä»ç„¶å®é™…å­˜åœ¨ã€‚

è¿™ç§é¸¿æ²Ÿçš„å­˜åœ¨æœ‰å…¶å¿…è¦æ€§ â€”â€” æ­£å¦‚ç«è½¦ä¸èƒ½å…è®¸ä»»æ„ä¹˜å®¢åœ¨ä»»æ„æ—¶é—´ä¸‹åœ°ç”¨åŒè„šåŸç”Ÿåœ°å¥”è·‘ã€‚
å¯¹äºåŠ¨æ€è¯­è¨€ â€”â€” ä¸èƒ½ç™¾åˆ†ç™¾å®Œç¾åœ°å¥—ç”¨é™æ€è¯­è¨€çš„å†™æ³•å’Œä¹ æƒ¯ï¼Œaardio æ”¯æŒåŸç”Ÿç±»å‹çš„ç›®çš„
ä¹Ÿåªæ˜¯ä¸ºäº†è°ƒç”¨å’Œåˆ©ç”¨é™æ€è¯­è¨€çš„èƒ½åŠ›è€Œå¹¶ä¸æ˜¯è®©è‡ªå·±å˜æˆé™æ€è¯­è¨€ã€‚

ä»¥ç»“æ„ä½“ä¸ºä¾‹ï¼š

1ã€aardio ç»“æ„ä½“ä½œä¸ºè°ƒç”¨ API çš„å‚æ•°æ—¶ä¼šåˆ†é…ä¸€å—ä¸´æ—¶çš„å†…å­˜,
å¹¶å°† aardio ç»“æ„ä½“çš„å€¼å¤åˆ¶è¿‡å»ï¼Œç„¶åå°†è¯¥å†…å­˜çš„æŒ‡é’ˆä½œä¸ºè°ƒç”¨ API çš„å‚æ•°,
åœ¨è°ƒç”¨ API ç»“æŸåå†å°†å†…å­˜ä¸­æ–°çš„å€¼åŒæ­¥åˆ° aardio ç»“æ„ä½“ï¼Œç„¶åç«‹å³é‡Šæ”¾ä¸´æ—¶å†…å­˜ï¼Œ
é‡Šæ”¾ä¸´æ—¶å†…å­˜æ˜¯ç«‹å³æ“ä½œï¼Œè€Œéç­‰å¾…åƒåœ¾å›æ”¶å™¨æ“ä½œã€‚

raw.argsPointer çš„å›è°ƒç”¨æ³•å°±æ˜¯åŸºäºè¿™ä¸ªåŸç†,
åˆ©ç”¨äº†ä¸€ä¸ªä¸­é—´ API å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶å›è°ƒ aardio å‡½æ•°ä»¥æ‹¦æˆªåˆ°åŸå§‹å‚æ•°æŒ‡é’ˆã€‚

2ã€å½“ä»¥ aardio ç»“æ„ä½“å¯¹è±¡ä½œä¸ºå‚æ•°è°ƒç”¨ raw.buffer,raw.realloc ç­‰åˆ†é…å†…å­˜çš„å‡½æ•°æ—¶ï¼Œ
ä¹Ÿä¼šå°†ç»“æ„ä½“çš„å€¼å¤åˆ¶è¿‡å»ï¼Œè¿™æ—¶å€™ raw.buffer,raw.realloc å¾—åˆ°çš„åŸå§‹æŒ‡é’ˆé‡Œå­˜å‚¨çš„å°±æ˜¯
åŸå§‹ç»“æ„ä½“ï¼Œæ‰€ä»¥è¿™äº›æŒ‡é’ˆå¯ä»¥ç›´æ¥ç”¨äº API çš„åŸå§‹æ•°æ®ç±»å‹æŒ‡é’ˆ â€”â€” è€Œä¸å†éœ€è¦è½¬æ¢ã€‚
ä½¿ç”¨ raw.convert() å‡½æ•° å¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å†æ¬¡åŒæ­¥åˆ° aardio ç»“æ„ä½“ã€‚

raw.argsPointer çš„éå›è°ƒç”¨æ³•å°±æ˜¯åŸºäºè¿™ä¸ªåŸç†ï¼Œä½†ç®€åŒ–äº†åˆ†é…å†…å­˜ã€åŒæ­¥æ•°æ®çš„æ“ä½œã€‚

æ³¨æ„æ™®é€šç»“æ„ä½“å¯ä»¥ä»»æ„åµŒå¥—æ•°ç»„,ä¸é™æ€APIå‡½æ•°å…¼å®¹ä¸”ç”¨æ³•æ›´ç®€æ´,
å¦‚æ— ç‰¹æ®ŠåŸå› ,ä¸€èˆ¬ä¸å¿…è¦ç”¨åˆ° raw.argsPointer ã€‚
end details**/
</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/aardio/Raw/raw.argsPointer.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª Ëü²»ÔÚÏîÄ¿ÎÄ¼şÀàĞÍ¹æ·¶ÄÚ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/aardio/Raw/raw.argsPointer.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/aardio/Raw/raw.argsPointer.md">Markdown æ ¼å¼</a>
</body> 
</html>