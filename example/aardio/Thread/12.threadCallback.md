[aardio æ–‡æ¡£](../../../index.htm "aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ")

# aardio èŒƒä¾‹: è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°?æ¶ˆæ¯ \_WM\_THREAD\_CALLBACK

```aardio aardio
//è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°?import win.ui;
/*DSG{{*/
var winform = win.form(text="è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°?æ¶ˆæ¯ _WM_THREAD_CALLBACK";right=599;bottom=399)
winform.add(
edit={cls="edit";left=17;top=22;right=585;bottom=379;edge=1;multiline=1;z=1}
)
/*}}*/

import web.json;
winform.onSendStruct = function(structParam){
    winform.edit.print("onSendStruct",structParam);
    structParam.x = 123;

    //å¯é€‰è¿”å›ä¿®æ”¹åçš„å€?    return structParam;
}

winform.onSendJson = function(jsonParam){
    winform.edit.print("onSendJson",jsonParam);

    import ide;
    ide.openDocument("~/example/Languages/Delphi/dll.aardio");
}

thread.invoke(
    function(hwnd){
        /*
        _WM_THREAD_CALLBACK ä½¿æ‰€æœ‰å›è°ƒå®‰å…¨çš„è½¬å‘åˆ°UIçº¿ç¨‹ã€?        _WM_THREAD_CALLBACK å¯ä»¥è·¨çº¿ç¨‹è·¨ç¼–ç¨‹è¯­è¨€ä½¿ç”¨ã€?        */
        var ret,structParam = ::User32.SendMessage(
            hwnd,0xACCE/*_WM_THREAD_CALLBACK*/,
            //çª—ä½“å‡½æ•°å? ç»“æ„ä½“åŸå‹å£°æ˜?); ç»“æ„ä½“åŸå‹å£°æ˜åº”ä½¿ç”¨aardioè¯­æ³•
            "onSendStruct( { int x;int y;int id } )",
            { int x = 1;int y = 2;id = thread.getId() }
        )

        import web.json;
        ::User32.SendMessage(
            hwnd,0xACCE/*_WM_THREAD_CALLBACK*/,
            //å¦‚æœç»“æ„ä½“åŸå‹å£°æ˜ä¸º "{JSON}" åˆ™ä¸‹ä¸€ä¸ªå‚æ•°ä¼ å…¥JSONæ–‡æœ¬
            "onSendJson( {JSON} )",
            //ç•Œé¢çº¿ç¨‹å¦‚æœè°ƒç”¨äº?import web.jsonï¼Œåˆ™ä¼šè‡ªåŠ¨è§£æä¸‹é¢çš„JSONæ–‡æœ¬ï¼Œè§£æç»“æœå°†ä½œä¸ºè¢«è°ƒç”¨å‡½æ•°çš„è°ƒç”¨å‚æ•°
            //jsonå¿…é¡»ä½¿ç”¨ä¸€ä¸ªæ•°ç»„åŒ…å«å¤šä¸ªå‚æ•?            web.json.stringify( { structParam } )
        )
    },winform.hwnd
)

/*
//_WM_THREAD_CALLBACK ä¼šå°†è°ƒç”¨çª—å£å‡½æ•°çš„è¿”å›å€¼è½¬æ¢ä¸ºæ•°å€¼ï¼Œæ— æ³•è¿”å›å…¶ä»–å€¼ã€?//å¯åœ¨ä¸‹é¢çš„äº‹ä»¶å†…æ‹¦æˆªè°ƒç”¨çª—å£å‡½æ•°çš„è¿”å›å€¼ï¼Œå¹¶è¿”å›æ–°çš„è¿”å›å€¼ï¼ˆä»ä¼šè½¬æ¢ä¸ºæ•°å€¼ï¼‰ã€?winform.onThreadCallBackReturn = function(result){
    return result;
}
*/

winform.show();
win.loopMessage();

```

[Markdown æ ¼å¼](https://www.aardio.com/zh-cn/doc/example/aardio/Thread/12.threadCallback.md)

