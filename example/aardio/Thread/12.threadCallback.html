
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°ƒ æ¶ˆæ¯ _WM_THREAD_CALLBACK'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€èŒƒä¾‹ - è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°ƒ æ¶ˆæ¯ _WM_THREAD_CALLBACK</title> 
<link rel="stylesheet" href="../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>aardio èŒƒä¾‹: è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°ƒ æ¶ˆæ¯ _WM_THREAD_CALLBACK</h1><pre><code class="aardio language-aardio">//è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°ƒ
import win.ui;
/*DSG{{*/
var winform = win.form(text=&quot;è·¨è¯­è¨€è·¨çº¿ç¨‹å›è°ƒ æ¶ˆæ¯ _WM_THREAD_CALLBACK&quot;;right=599;bottom=399)
winform.add(
edit={cls=&quot;edit&quot;;left=17;top=22;right=585;bottom=379;edge=1;multiline=1;z=1}
)
/*}}*/

import web.json;
winform.onSendStruct = function(structParam){ 
    winform.edit.print(&quot;onSendStruct&quot;,structParam);
    structParam.x = 123;

    //å¯é€‰è¿”å›ä¿®æ”¹åçš„å€¼
    return structParam; 
}

winform.onSendJson = function(jsonParam){
    winform.edit.print(&quot;onSendJson&quot;,jsonParam); 

    import ide;
    ide.openDocument(&quot;~/example/Languages/Delphi/dll.aardio&quot;);
}

thread.invoke( 
    function(hwnd){
        /*
        _WM_THREAD_CALLBACK ä½¿æ‰€æœ‰å›è°ƒå®‰å…¨çš„è½¬å‘åˆ°UIçº¿ç¨‹ã€‚
        _WM_THREAD_CALLBACK å¯ä»¥è·¨çº¿ç¨‹è·¨ç¼–ç¨‹è¯­è¨€ä½¿ç”¨ã€‚
        */
        var ret,structParam = ::User32.SendMessage( 
            hwnd,0xACCE/*_WM_THREAD_CALLBACK*/, 
            //çª—ä½“å‡½æ•°å( ç»“æ„ä½“åŸå‹å£°æ˜ ); ç»“æ„ä½“åŸå‹å£°æ˜åº”ä½¿ç”¨aardioè¯­æ³• 
            &quot;onSendStruct( { int x;int y;int id } )&quot;, 
            { int x = 1;int y = 2;id = thread.getId() }
        )


        import web.json;
        ::User32.SendMessage( 
            hwnd,0xACCE/*_WM_THREAD_CALLBACK*/,  
            //å¦‚æœç»“æ„ä½“åŸå‹å£°æ˜ä¸º &quot;{JSON}&quot; åˆ™ä¸‹ä¸€ä¸ªå‚æ•°ä¼ å…¥JSONæ–‡æœ¬
            &quot;onSendJson( {JSON} )&quot;, 
            //ç•Œé¢çº¿ç¨‹å¦‚æœè°ƒç”¨äº† import web.jsonï¼Œåˆ™ä¼šè‡ªåŠ¨è§£æä¸‹é¢çš„JSONæ–‡æœ¬ï¼Œè§£æç»“æœå°†ä½œä¸ºè¢«è°ƒç”¨å‡½æ•°çš„è°ƒç”¨å‚æ•°
            //jsonå¿…é¡»ä½¿ç”¨ä¸€ä¸ªæ•°ç»„åŒ…å«å¤šä¸ªå‚æ•°
            web.json.stringify( { structParam } )
        )
    },winform.hwnd
) 

/*
//_WM_THREAD_CALLBACK ä¼šå°†è°ƒç”¨çª—å£å‡½æ•°çš„è¿”å›å€¼è½¬æ¢ä¸ºæ•°å€¼ï¼Œæ— æ³•è¿”å›å…¶ä»–å€¼ã€‚
//å¯åœ¨ä¸‹é¢çš„äº‹ä»¶å†…æ‹¦æˆªè°ƒç”¨çª—å£å‡½æ•°çš„è¿”å›å€¼ï¼Œå¹¶è¿”å›æ–°çš„è¿”å›å€¼ï¼ˆä»ä¼šè½¬æ¢ä¸ºæ•°å€¼ï¼‰ã€‚
winform.onThreadCallBackReturn = function(result){
    return result;
}
*/

winform.show();
win.loopMessage();
</code></pre>
<a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/example/aardio/Thread/12.threadCallback.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª Ëü²»ÔÚÏîÄ¿ÎÄ¼şÀàĞÍ¹æ·¶ÄÚ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/example/aardio/Thread/12.threadCallback.md'" tppabs="https://www.aardio.com/zh-cn/doc/example/aardio/Thread/12.threadCallback.md">Markdown æ ¼å¼</a>
</body> 
</html>