
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name='description' content='aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£ - ç”¨ web.rest å¿«é€Ÿå¼€å‘ HTTP å®¢æˆ·ç«¯'>
<meta http-equiv='content-language' content='zh-cn'>
<title>aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£ - ç”¨ web.rest å¿«é€Ÿå¼€å‘ HTTP å®¢æˆ·ç«¯</title> 
<link rel="stylesheet" href="../../../../css/markdown.css" tppabs="https://www.aardio.com/zh-cn/doc/css/markdown.css">
<script src="../../../../js/prism.js" tppabs="https://www.aardio.com/zh-cn/doc/js/prism.js"></script>
<link rel="stylesheet" href="../../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/fontawesome.min.css">
<link rel="stylesheet" href="../../../../../../../lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css" tppabs="https://lib.baomitu.com/font-awesome/6.6.0/css/solid.min.css">
</head>
<body class="markdown-body"><a id="back-to-home" href="../../../../index.htm" tppabs="https://www.aardio.com/zh-cn/doc/" title="aardio ç¼–ç¨‹è¯­è¨€æ–‡æ¡£é¦–é¡µ"><i class="fas fa-home" id="home-icon"></i><i class="fas fa-robot" id="ai-icon" style="display: none;"></i><span id="aardio-document-home">aardio æ–‡æ¡£</span></a>
<h1>ç”¨ web.rest å¿«é€Ÿå¼€å‘ HTTP å®¢æˆ·ç«¯</h1>

<p>aardio é‡Œçš„ web.rest è®¾è®¡äº†ä¸€ç§ç®€å•çš„ HTTP æ¥å£æè¿°è§„åˆ™ â€”â€” å¯å°†æŒ‡å®šçš„ç½‘å€ï¼ˆå¯é€‰æŒ‡å®šæ¨¡æ¿å‚æ•°ï¼‰è‡ªåŠ¨è½¬æ¢ä¸ºæœ¬åœ°å‡½æ•°å¯¹è±¡ã€‚ç”¨æ³•æå…¶ç®€å•ï¼ˆ web.rest æœ¬èº«çš„å®ç°ä¹Ÿéå¸¸ç®€å• ï¼‰ã€‚</p>

<p>web.rest æ˜¯ä¸€ç§è°ƒç”¨è§„åˆ™ï¼Œä¹Ÿæ˜¯ aardio é‡Œçš„ä¸€ä¸ªåå­—ç©ºé—´ï¼Œweb.rest åå­—ç©ºé—´ä¸­çš„æ‰€æœ‰ç±»éƒ½æ˜¯ web.rest çš„å…·ä½“å®ç°ï¼Œæ‰€æœ‰ web.rest ç±»éƒ½ç»§æ‰¿è‡ª web.rest.clientï¼Œç”¨æ³•åŸºæœ¬ç›¸åŒã€‚  </p>

<p>web.rest åå­—ç©ºé—´çš„æ‰€æœ‰å®¢æˆ·ç«¯é»˜è®¤éƒ½å¯é€‰ä½¿ç”¨ç¬¬ä¸€ä¸ªæ„é€ å‚æ•°æŒ‡å®š User Agentï¼Œå¯é€‰ç”¨ç¬¬äºŒä¸ªæ„é€ å‚æ•°æŒ‡å®šä»£ç†æœåŠ¡å™¨ï¼Œè¯·å‚è€ƒï¼š<a href="../../inet/proxy.html" tppabs="https://www.aardio.com/zh-cn/doc/library-guide/std/inet/proxy.html">è®¾ç½®ä»£ç†æœåŠ¡å™¨</a> ã€‚</p>

<h2>ä¸€ã€ç®€å•ç¤ºä¾‹</h2>

<pre><code class="aardio language-aardio">
import console;
import web.rest.jsonLiteClient;

//åˆ›å»º HTTP( REST ) å®¢æˆ·ç«¯ã€‚
var http = web.rest.jsonLiteClient();

//å£°æ˜ HTTP æ¥å£å¯¹è±¡
var api = http.api(&quot;http://httpbin.org/anything/&quot;)

/*
è°ƒç”¨ HTTP æ¥å£å‡½æ•°ï¼ˆå·²ç»è‡ªåŠ¨è½¬æ¢ä¸ºäº†æœ¬åœ°å‡½æ•°ï¼‰ã€‚
è¿”å› JSON è‡ªåŠ¨è½¬æ¢ä¸ºäº† aardio å¯¹è±¡ã€‚
*/ 
var result = api.object.method({
    name = &quot;ç”¨æˆ·å&quot;;
    data = &quot;å…¶ä»–æ•°æ®&quot;;
});

//è¾“å‡ºæœåŠ¡ç«¯è¿”å›å¯¹è±¡ â€”â€” è¿™ä¸ªæ¥å£è¿”å›çš„æ˜¯ HTTP è¯·æ±‚ä¿¡æ¯ 
console.dumpJson(result);
console.pause();
</code></pre>

<p>ä¸Šé¢çš„ä»£ç å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´åˆ° aardio ä¸­è¿è¡Œï¼Œè¯¥æ¥å£è¿”å›çš„æ˜¯ HTTP è¯·æ±‚ä¿¡æ¯ â€”â€” ç”¨äºæµ‹è¯•å­¦ä¹ éå¸¸æ–¹ä¾¿ã€‚  </p>

<p>æˆ‘ä»¬ä¸»è¦çœ‹ä¸‹é¢è¿™å¥å‘é€è¯·æ±‚è°ƒç”¨ HTTP æ¥å£çš„ä»£ç ï¼š  </p>

<pre><code class="aardio language-aardio">var result = api.object.method({
    name = &quot;ç”¨æˆ·å&quot;;
    data = &quot;å…¶ä»–æ•°æ®&quot;;
});
</code></pre>

<p>ä¸Šé¢çš„å‡½æ•°è°ƒç”¨åšäº†å‡ ä»¶äº‹ï¼š  </p>

<ol>
<li><p>å°† api.object.method æ¯ä¸€ä¸ªä¸‹çº§æˆå‘˜åå­—è¿½åŠ åˆ°è¯·æ±‚ç½‘å€åé¢ï¼Œå¤šä¸ªåå­—è‡ªåŠ¨ç”¨ &quot;/&quot; åˆ†å¼€ã€‚ä¹Ÿå°±æ˜¯è‡ªåŠ¨ç”Ÿæˆä¸‹é¢è¿™æ ·çš„è¯·æ±‚åœ°å€ï¼š  </p>

<pre><code class="aardio language-aardio">&quot;http://httpbin.org/anything&quot; + &quot;/object&quot; + &quot;/method&quot;,
</code></pre></li>
<li><p>å°†å‡½æ•°å‚æ•°æŒ‰ç½‘é¡µè¡¨å•ç¼–ç è§„åˆ™è½¬æ¢ä¸ºå­—ç¬¦ä¸²æäº¤ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„è½¬æ¢ï¼š</p>

<pre><code class="aardio language-aardio">inet.url.stringifyParameters({
    name = &quot;ç”¨æˆ·å&quot;;
    data = &quot;å…¶ä»–æ•°æ®&quot;;
})
</code></pre></li>
<li><p>è§£ææœåŠ¡å™¨è¿”å›çš„ JSON ï¼Œå¹¶ä½œä¸ºå‡½æ•°è¿”å›å€¼è¿”å›ã€‚</p>

<p>å®é™…ä¸Šè¿™å¥å‘é€è¯·æ±‚çš„ä»£ç ä¼šè¢«è½¬æ¢ä¸ºä¸‹é¢çš„ä»£ç æ‰§è¡Œï¼š  </p>

<pre><code class="aardio language-aardio">var result = http.post(
&quot;http://httpbin.org/anything&quot; + &quot;/object&quot; + &quot;/method&quot;,
inet.url.stringifyParameters({
    name = &quot;ç”¨æˆ·å&quot;;
    data = &quot;å…¶ä»–æ•°æ®&quot;;
})
);
</code></pre>

<p>ä¸Šé¢çš„ object , method æˆ‘ä»¬ç§°ä¸ºã€ç½‘å€æ¨¡æ¿å‚æ•°ã€ã€‚  </p></li>
</ol>

<h2>äºŒã€ç½‘å€æ¨¡æ¿å‚æ•°</h2>

<p>åœ¨å£°æ˜ API å¯¹è±¡æ—¶ï¼Œ HTTP æ¥å£ç½‘å€ä¸­å¯é€‰ä½¿ç”¨å¤§æ‹¬å· <code>{}</code> åŒ…å«æ¨¡æ¿å‚æ•°åï¼Œç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">&quot;http://httpbin.org/anything/{org}/{name}/repos&quot;
</code></pre>

<p>ä¸Šé¢çš„ <code>{org}</code> , <code>{name}</code> éƒ½æ˜¯&quot;ç½‘å€æ¨¡æ¿å‚æ•°&quot;ã€‚</p>

<p>åœ¨è°ƒç”¨ HTTP æ¥å£æ—¶ï¼ŒHTTP API å¯¹è±¡çš„æ‰€æœ‰ä¸‹çº§æˆå‘˜åç§°ï¼ˆæ¨¡æ¿å®å‚ï¼‰ä¼šé€ä¸ªæ›¿æ¢ã€ç½‘å€æ¨¡æ¿å‚æ•°ã€ã€‚  </p>

<p>ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>

<pre><code class="aardio language-aardio">import console;
import web.rest.jsonLiteClient;
var http = web.rest.jsonLiteClient();

//å£°æ˜ HTTP æ¥å£å¯¹è±¡
var api = http.api(&quot;http://httpbin.org/anything/{org}/{name}/repos&quot;)

//è°ƒç”¨ HTTP æ¥å£å‡½æ•°
var result = api.aardio.jacen({
    name = &quot;ImTip&quot;;
    description = &quot;é€šç”¨è¾“å…¥æ³•çŠ¶æ€æç¤º&quot;;
});

console.dumpJson(result);
console.pause();
</code></pre>

<p>ä¸Šé¢è°ƒç”¨ api.aardio.jacen() å‡½æ•°çš„å®é™…è¯·æ±‚åœ°å€ä¸ºï¼š</p>

<pre><code class="aardio language-aardio">&quot;http://httpbin.org/anything/&quot;
  + &quot;aardio&quot; + &quot;/&quot; + &quot;jacen&quot; + &quot;/&quot; + &quot;/repos&quot;
</code></pre>

<p>æ¨¡æ¿å®å‚ &quot;aardio&quot; ä¼šæ›¿æ¢æ¨¡æ¿å‚æ•°  <code>{org}</code> ï¼Œæ¨¡æ¿å®å‚ &quot;jacen&quot; ä¼šæ›¿æ¢æ¨¡æ¿å‚æ•° <code>{name}</code> ï¼Œä¾æ¬¡ä»å‰å‘åæ›¿æ¢ï¼ˆå¿½ç•¥æ¨¡æ¿å ï¼‰ã€‚  </p>

<p>ä¹Ÿå¯ä»¥æŠŠæ–œæ å†™åˆ°æ¨¡æ¿å˜é‡é‡Œé¢ï¼Œä¾‹å¦‚ <code>{/name}</code> ï¼Œè¿™è¡¨ç¤ºï¼šå¦‚æœè°ƒç”¨æ—¶æŒ‡å®šäº†æ¨¡æ¿å®å‚åˆ™ä¿ç•™æ–œæ ï¼Œå¦åˆ™å»æ‰æ–œæ†ã€‚</p>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨æ—¶æ˜ç¡®æŒ‡å®šæ¨¡æ¿å®å‚çš„åå­—ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code class="aardio language-aardio">import web.rest.jsonLiteClient;
var http = web.rest.jsonLiteClient();

//å£°æ˜ HTTP æ¥å£å¯¹è±¡
var api = http.api(&quot;http://httpbin.org/anything/{org}/{name}/repos&quot;)

//URL æ¨¡æ¿å®å‚ï¼Œä½¿ç”¨åå€¼å¯¹æŒ‡å®šäº†å‚æ•°çš„åå­—
var urlParam = { org = &quot;aardio&quot;, name = &quot;jacen&quot; } 

//è°ƒç”¨ HTTP æ¥å£å‡½æ•°
var result = api[urlParam]({
    name = &quot;ImTip&quot;;
    description = &quot;é€šç”¨è¾“å…¥æ³•çŠ¶æ€æç¤º&quot;;
});
</code></pre>

<p>åœ¨ç½‘å€å°¾éƒ¨å¯ä»¥ç”¨ <code>{...}</code> æŒ‡å®šä¸å®šä¸ªæ•°çš„æ¨¡æ¿å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>

<pre><code class="aardio language-aardio">import web.rest.jsonLiteClient;
var http = web.rest.jsonLiteClient();

//å£°æ˜ HTTP æ¥å£å¯¹è±¡
var api = http.api(&quot;http://httpbin.org/anything/{...}&quot;)
</code></pre>

<p>è¿™ä¸ª  <code>{...}</code> å¯ä»¥çœç•¥ä¸å†™ï¼Œçœç•¥ä»ç„¶æ”¯æŒä¸å®šä¸ªæ•°æ¨¡æ¿å‚æ•°ï¼Œå¤šä¸ªæ¨¡æ¿å®å‚ä¼šè‡ªåŠ¨ç”¨ &quot;/&quot; åˆ†éš”ã€‚</p>

<h2>ä¸‰ã€HTTP è¯·æ±‚æ–¹æ³•</h2>

<p>HTTP åè®®å¸¸ç”¨çš„è¯·æ±‚æ–¹æ³•æœ‰ï¼šGETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEï¼ŒPATCHï¼ŒHEADã€‚</p>

<p>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨ HTTP æ¥å£å‡½æ•°æ—¶ï¼Œå¯ä»¥å°†å°å†™çš„ HTTP æ–¹æ³•åä½œä¸ºå‡½æ•°åè°ƒç”¨ â€”â€” å°±æ˜¯ä»¥è¯¥ HTTP æ–¹æ³•å‘é€è¯·æ±‚ã€‚</p>

<p>ä¾‹å¦‚ï¼š</p>

<pre><code class="aardio language-aardio">
import console; 
import web.rest.jsonLiteClient;
var http = web.rest.jsonLiteClient(); 

//å¯åœ¨å‚æ•° @2 æŒ‡å®šé»˜è®¤ HTTP æ–¹æ³•ï¼Œä¸æŒ‡å®šé»˜è®¤ä¸º &quot;POST&quot;
var api = http.api(&quot;http://httpbin.org/anything/&quot;,&quot;POST&quot;) 

//å‘é€ GET è¯·æ±‚
var ret = api.name.get( a = 1,b = 2);

//å‘é€ POST è¯·æ±‚
var ret = api.name.post( a = 1,b = 2);

//å‘é€ PATCH è¯·æ±‚
var ret = api.name.patch( a = 1,b = 2);

//å‘é€ PUT è¯·æ±‚
var ret = api.name.put( a = 1,b = 2);

//å‘é€ DELETE è¯·æ±‚
var ret = api.name.delete( a = 1,b = 2);

console.dumpJson(ret); 
console.pause(true);
</code></pre>

<p>è¿™äº› http æ–¹æ³•ä¸ä»…ä»…å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè½¬æ¢å¯¹è±¡ â€”â€” ç”¨äºè½¬æ¢åç»­çš„è¯·æ±‚æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š  </p>

<pre><code class="aardio language-aardio">var ret = api.get.method( a = 1,b = 2);
</code></pre>

<p>æ³¨æ„ head, get, post, put, patch, delete ç­‰ä½œä¸º HTTP æ¥å£å‡½æ•°åæ—¶ä¸ä¼šè§†ä¸ºã€ç½‘å€æ¨¡æ¿å®å‚ã€è¢«æ·»åŠ åˆ°è¯·æ±‚ç½‘å€ä¸­ã€‚</p>

<p>å¦‚æœå°†è¿™äº›é»˜è®¤ HTTP  æ–¹æ³•åå‰é¢æ·»åŠ ä¸€ä¸ªæ–œæ ï¼Œå°±å¯ä»¥è§†ä¸ºã€ç½‘å€æ¨¡æ¿å®å‚ã€è€Œé HTTP æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š  </p>

<pre><code class="aardio language-aardio">var result = api.get[&quot;/get&quot;]()
</code></pre>

<p>ä¸Šé¢çš„ä»£ç å¯ä»¥ç®€å†™ä¸ºï¼š</p>

<pre><code class="aardio language-aardio">var result = api.getGet()
</code></pre>

<p>ç±»ä¼¼çš„è¿˜æœ‰ postPost(), putPut() â€¦â€¦ ç­‰å‡½æ•°ã€‚</p>

<h2>å››ã€web.rest åå­—ç©ºé—´</h2>

<p>web.rest åå­—ç©ºé—´çš„ç±»éƒ½ç»§æ‰¿è‡ª web.rest.clientï¼ŒåŒºåˆ«åœ¨äºè¯·æ±‚æ•°æ®æ ¼å¼æˆ–æœåŠ¡å™¨å“åº”æ•°æ®æ ¼å¼ä¸åŒã€‚  </p>

<p>æœ€å¸¸ç”¨çš„ web.rest ç±»å¦‚ä¸‹ï¼š  </p>

<p>1ã€web.rest.client</p>

<p>è¯·æ±‚ä¸ºç½‘é¡µè¡¨å•ç¼–ç ï¼Œå“åº”æ•°æ®ç›´æ¥è¿”å›ã€‚</p>

<p>3ã€web.rest.jsonClient  </p>

<p>è¯·æ±‚ä¸å“åº”æ•°æ®éƒ½æ˜¯ JSON ã€‚</p>

<p>3ã€web.rest.jsonLiteClient</p>

<p>è¯·æ±‚ä¸ºç½‘é¡µè¡¨å•ç¼–ç ï¼Œå“åº”æ•°æ®ä¸º JSON ã€‚</p>

<p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹ web.rest.jsonLiteClient çš„ä¸»è¦æºç ï¼š</p>

<pre><code class="aardio language-aardio">
import web.json;
import web.rest.client;

namespace web.rest; 

class jsonLiteClient{
  ctor( ... ){
    this = ..web.rest.client( ... ); 

    //è¯·æ±‚æ•°æ® MIME ç±»å‹
    this.contentType = &quot;application/x-www-form-urlencoded&quot;; 

    //è‡ªåŠ¨è½¬æ¢è¯·æ±‚å‚æ•°
    this.stringifyRequestParameters  = function(param,codepage){
      //çœç•¥å…¶ä»–ä»£ç 
      return ..inet.url.stringifyParameters(p,codepage);
    } 

    //æœŸæœ›æœåŠ¡ç«¯è¿”å›çš„æ•°æ® MIME ç±»å‹
    this.acceptType = &quot;application/json,text/json,*/*&quot;;

    //è‡ªåŠ¨è½¬æ¢æœåŠ¡å™¨å“åº”æ•°æ®
    this.parseResponseResult = function(s){
      //çœç•¥å…¶ä»–ä»£ç 
      return  ..web.json.parse(s,true);
    }
  }; 
}
</code></pre>

<p>æ¯ä¸ªä¸åŒçš„ web.rest ç±» â€”â€” ä¸»è¦æ˜¯ä¿®æ”¹äº†è½¬æ¢è¯·æ±‚å‚æ•°æ ¼å¼çš„ this. stringifyRequestParameters å‡½æ•°ï¼Œä»¥åŠä¿®æ”¹æœåŠ¡å™¨å“åº”æ•°æ®æ ¼å¼çš„ this. parseResponseResult ã€‚</p>

<h2>äº”ã€è·å–é”™è¯¯ä¿¡æ¯</h2>

<p>åœ¨è°ƒç”¨ HTTP æ¥å£æ—¶ï¼ŒæˆåŠŸè¿”å›è§£æåçš„å“åº”æ•°æ®ï¼Œå¤±è´¥åˆ™è¿”å› 3 ä¸ªå€¼ï¼šnull, é”™è¯¯ä¿¡æ¯, é”™è¯¯ä»£ç ï¼ˆå¯é€‰ï¼‰ ã€‚</p>

<p>è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼šaardio ä¸­çš„å¾ˆå¤šå‡½æ•°éƒ½æ˜¯æˆåŠŸè¿”å›é null å€¼ï¼Œå¤±è´¥è¿”å› null ä¸ é”™è¯¯ä¿¡æ¯ ç­‰å¤šä¸ªå€¼ï¼Œä¸€èˆ¬ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>

<p>ä¾‹å¦‚ï¼š  </p>

<pre><code class="aardio language-aardio">
import console; 
import web.rest.client;
var http = web.rest.client(); 

var api = http.api(&quot;http://httpbin.org/status/500&quot;); 

//å‘é€ GET è¯·æ±‚
var ret,err = api.get( a = 1,b = 2);

if(!ret){

  //å‡ºé”™äº†è¾“å‡ºé”™è¯¯ä¿¡æ¯
  console.log(&quot;å‡ºé”™äº†&quot;,err)

  //è·å–åŸå§‹æœåŠ¡å™¨å“åº”æ•°æ®
  http.lastResponse()
}
else {
  console.dumpJson(ret); 
}

console.pause(true);
</code></pre>

<p>å¯ä»¥è¿è¡Œ aardio <strong>ã€Œ å·¥å…· &gt; ç½‘ç»œ &gt; HTTP çŠ¶æ€ç æ£€æµ‹ã€</strong>æŸ¥çœ‹è¿”å›çŠ¶æ€ç çš„ç›¸å…³ä¿¡æ¯ã€‚</p>

<p>http.lastResponse() å¯ä»¥è·å–æœåŠ¡å™¨åŸå§‹å“åº”æ•°æ® â€”â€” å¦‚æœäº‹å…ˆå¯¼å…¥äº† console åº“ï¼Œåˆ™åœ¨æ§åˆ¶å°ç›´æ¥æ˜¾ç¤ºã€‚</p>

<p>å½“ç„¶ä¸Šé¢çš„ä»£ç ä¸€èˆ¬åœ¨è°ƒè¯•æ•…éšœæ—¶æ‰éœ€è¦ï¼Œä¸€èˆ¬æ²¡å¿…è¦æŠŠé”™è¯¯å¤„ç†å†™å¾—è¿™ä¹ˆç»†ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ç®€åŒ–å¦‚ä¸‹ï¼š</p>

<pre><code class="aardio language-aardio">
import console;
import web.rest.jsonLiteClient;
var restClient = web.rest.jsonLiteClient();   

var duck = restClient.post(&quot;http://httpbin.org/post&quot;,{
    ç”¨æˆ·å = &quot;ç”¨æˆ·å&quot;;
    å¯†ç  = &quot;å¯†ç &quot;;
} )

//è¿™å¥ç›¸å½“äº if( duck and duck[&quot;ç¿…è†€&quot;] ) 
if( duck[[&quot;ç¿…è†€&quot;]] ){ 
    console.log(&quot;ä¸ç®¡æœåŠ¡å™¨ç»™æˆ‘çš„æ˜¯ä»€ä¹ˆé¸­å­ï¼Œæ€»ä¹‹æœ‰ç¿…è†€çš„éƒ½æ˜¯å¥½é¸­å­&quot;)
}
else {
    //å‡ºé”™äº†
    console.log(&quot;æ€ä¹ˆå›äº‹æ²¡ç¿…è†€è¿˜èƒ½å«é¸­å­å—ï¼Ÿ&quot;);
}

console.pause();
</code></pre>

<p><code>duck[[&quot;ç¿…è†€&quot;]]</code> ä½¿ç”¨äº†ç›´æ¥ä¸‹æ ‡ â€”â€” duck ä¸º null æ—¶ <code>duck[[&quot;ç¿…è†€&quot;]]</code> ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å› null ã€‚</p>

<p>å‚è€ƒï¼š<a href="../../../../language-reference/operator/member-access.html" tppabs="https://www.aardio.com/zh-cn/doc/language-reference/operator/member-access.html">æ“ä½œç¬¦ - ç›´æ¥ä¸‹æ ‡</a></p>

<h2>å…­ã€è‡ªå®šä¹‰ HTTP è¯·æ±‚å¤´</h2>

<p>å¯ä½¿ç”¨ http.addHeaders è‡ªå®šä¹‰ HTTP è¯·æ±‚å¤´ï¼Œç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">
import console; 
import web.rest.jsonLiteClient;
var http = web.rest.jsonLiteClient(); 

//å¦‚æœæ‰€æœ‰è¯·æ±‚éƒ½è¦æ·»åŠ çš„ç›¸åŒHTTPå¤´ï¼Œåœ¨è¿™é‡ŒæŒ‡å®š
http.addHeaders = {
    [&quot;Test&quot;] = &quot;test&quot;
}

var api = http.api(&quot;http://httpbin.org/anything/&quot;) 

//å‘é€ GET è¯·æ±‚
var ret = api.name.get( a = 1,b = 2); 

console.dumpJson(ret); 
console.pause(true);
</code></pre>

<p>å¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½è¦åŠ¨æ€ä¿®æ”¹ HTTP è¯·æ±‚å¤´ï¼Œå¯ä»¥åœ¨ http.  beforeRequestHeaders å‡½æ•°å†…è¿”å›éœ€è¦æ·»åŠ çš„è¯·æ±‚å¤´ï¼Œä¾‹å¦‚ï¼š</p>

<pre><code class="aardio language-aardio">import crypt; 
import web.rest.jsonLiteClient;
import console; 

var http = web.rest.jsonLiteClient(); 

//æ¯æ¬¡è¯·æ±‚éƒ½è¦åŠ¨æ€ä¿®æ”¹ HTTP è¯·æ±‚å¤´
http.beforeRequestHeaders = function(params){

    var apiKey = &quot;&quot;;
    var secretKey = &quot;&quot;;
    var authorization = {
        [&quot;apiKey&quot;] = apiKey;
        [&quot;time&quot;] = tonumber(time());
    }

    authorization[&quot;sign&quot;] = crypt.md5(apiKey ++ secretKey ++ authorization.time)

    //é€šè¿‡è¿”å›å€¼è®¾ç½®æœ¬æ¬¡è¯·æ±‚çš„ HTTP å¤´, Content-Type ä¸éœ€è¦æŒ‡å®šï¼ˆä¼šè‡ªåŠ¨æŒ‡å®šï¼‰
    return {
        [&quot;Authorization&quot;] = crypt.encodeBin(web.json.stringify(authorization))
    };
}

//å£°æ˜ API å¯¹è±¡
var api = http.api(&quot;http://httpbin.org/anything/&quot;) 

//å‘é€ GET è¯·æ±‚
var ret = api.name.get( a = 1,b = 2); 

console.dumpJson(ret); 
console.pause(true);
</code></pre>

<h2>ä¸ƒã€multipart/form-data ç¼–ç ä¸Šä¼ æ–‡ä»¶</h2>

<p>ç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">import web.rest.client;
var http = web.rest.client();
var api = http.api(&quot;https://fontello.com&quot;);

//ä½¿ç”¨æ–‡ä»¶è¡¨å•ä¸Šä¼ æ–‡ä»¶ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå­—æ®µ
var result = api.sendMultipartForm(
    file = &quot;@/test.json&quot;; //ä¸Šä¼ æ–‡ä»¶è·¯å¾„å‰é¢å¿…é¡»åŠ ä¸€ä¸ªå­—ç¬¦ @ ï¼Œå…¶ä»–å­—æ®µä¸ç”¨åŠ 
});
</code></pre>

<p>ä¸Šé¢ä»£ç ä¹Ÿå¯ä»¥å†™ä¸º api.post.sendMultipartForm() ;</p>

<p>å¦‚æœéœ€è¦å¤„ç†ä¸Šä¼ è¿›åº¦ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š  </p>

<pre><code class="aardio language-aardio">var result = api.sendMultipartForm( {
        file = &quot;@/test.json&quot;;
    },function(sendData,sendSize,contentLength,remainSize){
        /*
        sendData ä¸ºæœ¬æ¬¡ä¸Šä¼ æ•°æ®ï¼›
        sendSize ä¸ºæœ¬æ¬¡ä¸Šä¼ å­—èŠ‚æ•°ï¼›
        contentLength ä¸ºè¦ä¸Šä¼ çš„æ€»å­—èŠ‚æ•°ï¼›
        remainSize ä¸ºå‰©ä½™å­—èŠ‚æ•°ï¼›
        */
    }
);
</code></pre>

<h2>å…«ã€ä¸Šä¼ æ–‡ä»¶</h2>

<p>ç›´æ¥ä¸Šä¼ æ–‡ä»¶ç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">import web.rest.jsonLiteClient;
var http = web.rest.jsonLiteClient();
var api = http.api(&quot;http://httpbin.org/anything&quot;);

//ä¸Šä¼ æ–‡ä»¶
var result = api.sendFile(&quot;/ä¸Šä¼ æ–‡ä»¶è·¯å¾„.txt&quot;);
</code></pre>

<p>ä¹Ÿå¯ä»¥å¦‚ä¸‹æŒ‡å®šä¸Šä¼ è¿›åº¦å›è°ƒå‡½æ•°ã€‚</p>

<pre><code class="aardio language-aardio">var result = api.sendFile( &quot;/ä¸Šä¼ æ–‡ä»¶è·¯å¾„.txt&quot;
    ,function(sendData,sendSize,contentLength,remainSize){
        /*
        sendData ä¸ºæœ¬æ¬¡ä¸Šä¼ æ•°æ®ï¼›
        sendSize ä¸ºæœ¬æ¬¡ä¸Šä¼ å­—èŠ‚æ•°ï¼›
        contentLength ä¸ºè¦ä¸Šä¼ çš„æ€»å­—èŠ‚æ•°ï¼›
        remainSize ä¸ºå‰©ä½™å­—èŠ‚æ•°ï¼›
        */
    }
);
</code></pre>

<h2>ä¹ã€ä¸‹è½½æ–‡ä»¶</h2>

<p>ä¸‹è½½æ–‡ä»¶ç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">import console;
import web.rest.jsonLiteClient;
var http = web.rest.client();

var aardio = http.api(&quot;https://www.aardio.com&quot;);

/*
ä¸‹è½½æ–‡ä»¶:
å¦‚æœåˆ›å»ºæ–‡ä»¶å¤±è´¥ receiveFile å‡½æ•°ä¼šè¿”å› null åŠé”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™è¿”å›å¯¹è±¡è‡ªèº«ã€‚
*/
var ok = aardio.receiveFile(&quot;/.test.html&quot;).get();
</code></pre>

<p>å¯é€‰å¦‚ä¸‹æŒ‡å®šä¸‹è½½è¿›åº¦å›è°ƒå‡½æ•°ï¼š  </p>

<pre><code class="aardio language-aardio">aardio.receiveFile(&quot;/.test.html&quot;,function(recvData,recvSize,contentLength){
    /*
    recvData ä¸ºå½“å‰ä¸‹è½½æ•°æ®ã€‚
    recvSize ä¸ºå½“å‰ä¸‹è½½æ•°æ®å­—èŠ‚æ•°ã€‚
    contentLength ä¸ºéœ€è¦ä¸‹è½½çš„æ€»å­—èŠ‚æ•°ã€‚
    */
    console.log(,recvSize,contentLength)
}).get();
</code></pre>

<h2>åã€è‡ªåŠ¨æ¨¡å¼åŒ¹é…</h2>

<p>åœ¨å£°æ˜ HTTP æ¥å£å¯¹è±¡æ—¶ï¼Œè¿˜å¯ä»¥æŒ‡å®šæ¨¡å¼ä¸² â€”â€” ç”¨äºè‡ªåŠ¨åŒ¹é…æœåŠ¡å™¨å“åº”æ•°æ®ï¼Œå¹¶è¿”å›åŒ¹é…ç»“æœã€‚</p>

<p>ç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">
import console; 
console.showLoading(&quot;è·å–å¤–ç½‘IP&quot;);

import web.rest.client;
var http = web.rest.client();

//å£°æ˜ APIï¼Œå‚æ•° @3 æŒ‡å®šçš„æ¨¡å¼ä¸²ç”¨äºåŒ¹é…è¿”å›æ•°æ®
var api = http.api(&quot;http://myip.ipip.net&quot;,,&quot;(\d+\.\d+\.\d+\.\d+)&quot;);

//è°ƒç”¨ HTTP æ¥å£ 
var ip = api.get();

//æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ
console.log( ip  );

console.pause(true);
</code></pre>

<h2>åä¸€ã€æ™®é€š HTTP å®¢æˆ·ç«¯</h2>

<p>web.rest åŸºäº inet.http ï¼ˆ <a href="../../inet/http.html" tppabs="https://www.aardio.com/zh-cn/doc/library-guide/std/inet/http.html">è¯·å‚è€ƒï¼šç©è½¬ inet.http</a>ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¢å¼ºç‰ˆçš„ HTTP å®¢æˆ·ç«¯åŠŸèƒ½ï¼Œç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">import console;
import web.rest.jsonClient;

//åˆ›å»º HTTP å®¢æˆ·ç«¯
var http = web.rest.jsonClient();

//å‘é€ GET è¯·æ±‚
var ret = http.get(&quot;http://httpbin.org/anything&quot;,{
    name = &quot;ç”¨æˆ·å&quot;;
    data = &quot;å…¶ä»–æ•°æ®&quot;;
})

//å‘é€ POST è¯·æ±‚
var ret = http.post(&quot;http://httpbin.org/anything&quot;,{
    name = &quot;ç”¨æˆ·å&quot;;
    data = &quot;å…¶ä»–æ•°æ®&quot;;
})

console.dumpJson(ret);
console.pause();
</code></pre>

<p>ä¸ inet.http ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæœåŠ¡ç«¯è¿”å›æ•°æ®çš„ç¼–ç å£°æ˜ä¸æ˜¯ UTF-8ï¼Œweb.rest ä¼šè‡ªåŠ¨è½¬æ¢ä¸º UTF-8 ã€‚</p>

<h2>åäºŒã€ç›´æ¥æäº¤åŸå§‹æ•°æ®</h2>

<p>ä½¿ç”¨ web.rest è°ƒç”¨ HTTP æ¥å£æ—¶ï¼Œå¦‚æœæäº¤æ•°æ®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™ä¸ä½œä»»ä½•å¤„ç† â€”â€” ç›´æ¥æäº¤ã€‚</p>

<p>ç¤ºä¾‹ï¼š</p>

<pre><code class="aardio language-aardio">
import console;
import web.rest.jsonClient;
var http = web.rest.jsonClient(); 

//ç¤ºä¾‹ JSON
var json = /*
{
    &quot;data&quot;:&quot;å…¶ä»–æ•°æ®&quot;,
    &quot;name&quot;:&quot;ç”¨æˆ·å&quot;
}
*/

//å¦‚æœæäº¤æ•°æ®æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¸ä½œä»»ä½•è½¬æ¢ç›´æ¥å‘é€
var ret = http.post(&quot;http://httpbin.org/anything&quot;,json)

console.dumpJson(ret);
console.pause();
</code></pre>

<h2>æ›´å¤šèŒƒä¾‹</h2>

<p>aardio è‡ªå¸¦ web.rest èŒƒä¾‹ï¼ŒèŒƒä¾‹ä½ç½®ï¼š<code>~/example/Web/REST</code></p>

<p><a href="javascript:if(confirm('https://www.aardio.com/zh-cn/doc/library-guide/std/web/rest/client.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ·şÎñÆ÷±¨¸æ·ÃÎÊµÄÎÄ¼şÊÇÒş²ØµÄ¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.aardio.com/zh-cn/doc/library-guide/std/web/rest/client.md'" tppabs="https://www.aardio.com/zh-cn/doc/library-guide/std/web/rest/client.md">Markdown æ ¼å¼</a></p>

</body> 
</html>